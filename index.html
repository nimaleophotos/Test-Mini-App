<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LENS APP - Photography Farcaster Mini-App</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: #e8e9ea;
            overflow: hidden;
            position: relative;
            transition: all 0.3s ease;
        }
        
        body.light-theme {
            background: #f8f9fa;
            color: #1a1a1a;
        }
        
        .app-container {
            width: 100%;
            max-width: 392px;
            height: 100vh;
            max-height: 695px;
            margin: 0 auto;
            position: relative;
            background: #1a1a1a;
            transition: all 0.3s ease;
        }
        
        body.light-theme .app-container {
            background: #ffffff;
        }
        
        /* Animated Background */
        .bg-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            z-index: 0;
        }
        
        .lens-flare {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        
        .lens-flare:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .lens-flare:nth-child(2) {
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }
        
        .lens-flare:nth-child(3) {
            bottom: 30%;
            left: 30%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) scale(1); opacity: 0.3; }
            50% { transform: translateY(-15px) scale(1.1); opacity: 0.1; }
        }
        
        /* Main Content */
        .content {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 15px;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            height: 32px;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        
        .lens-logo {
            width: 32px;
            height: 32px;
            border: 2px solid #fff;
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        body.light-theme .lens-logo {
            border-color: #2c2c2c;
        }
        
        .lens-logo::before {
            content: '';
            width: 16px;
            height: 16px;
            border: 1.5px solid #fff;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        body.light-theme .lens-logo::before {
            border-color: #2c2c2c;
        }
        
        .app-title {
            font-size: 20px;
            font-weight: 800;
            letter-spacing: 1.5px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        body.light-theme .app-title {
            color: #2c2c2c;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .theme-toggle {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
        }
        
        body.light-theme .theme-toggle {
            background: rgba(44,44,44,0.1);
            border-color: rgba(44,44,44,0.3);
            color: #2c2c2c;
        }
        
        .theme-toggle:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }
        
        body.light-theme .theme-toggle:hover {
            background: rgba(44,44,44,0.2);
        }
        
        .connect-wallet {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 12px;
            white-space: nowrap;
            height: 32px;
            display: flex;
            align-items: center;
        }
        
        body.light-theme .connect-wallet {
            background: rgba(44,44,44,0.1);
            border-color: rgba(44,44,44,0.3);
            color: #2c2c2c;
        }
        
        .connect-wallet:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }
        
        body.light-theme .connect-wallet:hover {
            background: rgba(44,44,44,0.2);
        }
        
        /* Daily Slogan */
        .daily-slogan {
            margin-bottom: 15px;
            width: 100%;
        }
        
        .slogan-text {
            font-size: 12px;
            font-weight: 400;
            color: #b8bcc8;
            margin: 0;
            transition: all 0.3s ease;
            opacity: 1;
            min-height: 16px;
            display: flex;
            flex-wrap: nowrap;
            gap: 3px;
            white-space: nowrap;
            overflow: hidden;
            width: 100%;
        }
        
        body.light-theme .slogan-text {
            color: #495057;
        }
        
        .slogan-word {
            opacity: 0;
            transform: translateX(-8px);
            animation: wordAppear 0.5s ease forwards;
            display: inline-block;
        }
        
        @keyframes wordAppear {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Separator Line */
        .nav-separator {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 20%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.2) 80%, transparent 100%);
            margin: 8px 0 12px 0;
            transition: all 0.3s ease;
        }
        
        body.light-theme .nav-separator {
            background: linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.1) 20%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.1) 80%, transparent 100%);
        }

        /* Tabs */
        .tabs-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin: 0;
            background: rgba(255,255,255,0.08);
            border-radius: 12px 12px 0 0;
            border: 1px solid rgba(255,255,255,0.15);
            border-bottom: none;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        body.light-theme .tabs-container {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.08);
        }
        
        .tab-buttons {
            display: flex;
            background: rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        body.light-theme .tab-buttons {
            background: rgba(0,0,0,0.03);
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .tab-button {
            padding: 10px 8px;
            background: rgba(255,255,255,0.05);
            border: none;
            border-right: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 800;
            text-align: center;
            border-bottom: 2px solid transparent;
            position: relative;
            font-size: 12px;
        }
        
        .tab-button:last-child {
            border-right: none;
        }
        
        body.light-theme .tab-button {
            background: rgba(0,0,0,0.03);
            border-right: 1px solid rgba(0,0,0,0.1);
            color: rgba(44,44,44,0.8);
        }
        
        body.light-theme .tab-button:last-child {
            border-right: none;
        }
        
        .tab-button:first-child {
            flex: 1;
        }
        
        .tab-button:nth-child(2) {
            flex: 1.8;
            font-size: 16px;
            font-weight: 700;
        }
        
        .tab-button:last-child {
            flex: 1;
        }
        
        .tab-button.active {
            color: #fff;
            background: rgba(255,255,255,0.1);
            border-bottom-color: rgba(255,255,255,0.6);
        }
        
        body.light-theme .tab-button.active {
            color: #2c2c2c;
            background: rgba(0,0,0,0.08);
            border-bottom-color: rgba(44,44,44,0.6);
        }
        
        .tab-button:hover:not(.active) {
            background: rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.9);
        }
        
        body.light-theme .tab-button:hover:not(.active) {
            background: rgba(0,0,0,0.05);
            color: rgba(44,44,44,0.9);
        }
        
        .tab-content {
            flex: 1;
            padding: 15px;
            overflow: hidden;
        }
        
        .tab-panel {
            display: none;
            height: 100%;
            overflow-y: auto;
            padding-right: 8px;
            margin-right: -4px;
        }
        
        .tab-panel::-webkit-scrollbar {
            width: 3px;
        }
        
        .tab-panel::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }
        
        .tab-panel::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }
        
        body.light-theme .tab-panel::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        
        body.light-theme .tab-panel::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.3);
        }
        
        .tab-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 5px;
            margin-top: 0;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            border-top: none;
            border-radius: 0 0 12px 12px;
            padding: 12px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        body.light-theme .bottom-nav {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.08);
        }
        
        .nav-buttons-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 5px;
            width: 100%;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .nav-buttons-container {
            background: rgba(0,0,0,0.015);
            border-color: rgba(0,0,0,0.03);
        }
        
        .nav-button {
            flex: 1;
            padding: 8px 6px;
            background: transparent;
            border: none;
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 9px;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            position: relative;
            white-space: nowrap;
        }
        
        body.light-theme .nav-button {
            color: #2c2c2c;
        }
        

        
        .nav-button:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-1px);
        }
        
        body.light-theme .nav-button:hover {
            background: rgba(0,0,0,0.1);
        }
        
        .camera-button {
            width: 60px !important;
            height: 60px !important;
            border-radius: 50% !important;
            background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%) !important;
            color: #000 !important;
            font-weight: 700 !important;
            font-size: 9px !important;
            flex: none !important;
            box-shadow: 0 4px 16px rgba(255,255,255,0.4) !important;
            border: 3px solid rgba(255,255,255,0.9) !important;
            margin: 0 !important;
            position: relative !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-direction: column !important;
        }
        
        body.light-theme .camera-button {
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%) !important;
            color: #fff !important;
            box-shadow: 0 4px 16px rgba(44,44,44,0.4) !important;
            border: 3px solid rgba(44,44,44,0.9) !important;
        }
        
        .camera-button:hover {
            transform: translateY(-2px) scale(1.05) !important;
            box-shadow: 0 6px 20px rgba(255,255,255,0.5) !important;
        }
        
        body.light-theme .camera-button:hover {
            box-shadow: 0 6px 20px rgba(44,44,44,0.5) !important;
        }
        
        .nav-icon {
            width: 16px;
            height: 16px;
            margin-bottom: 1px;
        }
        
        .camera-button .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 2px;
        }
        
        /* Full Page Screens */
        .page-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 1000;
            display: none;
            flex-direction: column;
            padding: 15px;
            overflow-y: auto;
            transition: all 0.3s ease;
        }
        
        body.light-theme .page-screen {
            background: #ffffff;
        }
        
        .page-screen.show {
            display: flex;
            animation: slideInFromRight 0.4s ease;
        }
        
        @keyframes slideInFromRight {
            from { 
                opacity: 0; 
                transform: translateX(100%); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }
        
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        
        body.light-theme .page-header {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .back-button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        body.light-theme .back-button {
            background: rgba(44,44,44,0.1);
            border-color: rgba(44,44,44,0.3);
            color: #2c2c2c;
        }
        
        .back-button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }
        
        body.light-theme .back-button:hover {
            background: rgba(44,44,44,0.2);
        }
        
        .page-title {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            text-align: center;
            flex: 1;
            transition: all 0.3s ease;
        }
        
        body.light-theme .page-title {
            color: #2c2c2c;
        }
        
        .page-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .info-section {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255,255,255,0.15);
            transition: all 0.3s ease;
        }
        
        body.light-theme .info-section {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.08);
        }
        
        .info-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: #e8e9ea;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .info-section h3 {
            color: #1a1a1a;
        }
        
        .info-section p {
            font-size: 12px;
            color: #b8bcc8;
            line-height: 1.5;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .info-section p {
            color: #495057;
        }
        
        .info-section a {
            color: #007BFF;
            text-decoration: none;
            font-weight: 600;
            border-bottom: 1px solid rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .info-section a:hover {
            color: #0056b3;
            border-bottom-color: rgba(0, 86, 179, 0.5);
        }
        
        body.light-theme .info-section a {
            color: #007BFF;
        }
        
        body.light-theme .info-section a:hover {
            color: #0056b3;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .feature-card {
            background: rgba(255,255,255,0.08);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        body.light-theme .feature-card {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.08);
        }
        
        .feature-card:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-3px);
        }
        
        body.light-theme .feature-card:hover {
            background: rgba(0,0,0,0.06);
            border-color: rgba(0,0,0,0.15);
        }
        
        .feature-card h4 {
            font-size: 13px;
            font-weight: 600;
            color: #e8e9ea;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .feature-card h4 {
            color: #1a1a1a;
        }
        
        .feature-card p {
            font-size: 11px;
            color: #b8bcc8;
            line-height: 1.4;
            transition: all 0.3s ease;
        }
        
        body.light-theme .feature-card p {
            color: #495057;
        }
        
        .competition-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        body.light-theme .competition-item {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.08);
        }
        
        .competition-item:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }
        
        body.light-theme .competition-item:hover {
            background: rgba(0,0,0,0.06);
            border-color: rgba(0,0,0,0.15);
        }
        
        .competition-title {
            font-size: 15px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .competition-title {
            color: #1a1a1a;
        }
        
        .competition-description {
            font-size: 12px;
            color: #ccc;
            line-height: 1.4;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .competition-description {
            color: #495057;
        }
        
        .competition-prize {
            font-size: 12px;
            color: #FFD700;
            font-weight: 600;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .gallery-item {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        body.light-theme .gallery-item {
            background: rgba(0,0,0,0.05);
            border-color: rgba(0,0,0,0.2);
        }
        
        body.light-theme .featured-spots-title {
            color: #1a1a1a !important;
        }
        
        body.light-theme .tutorial-section-title {
            color: #1a1a1a !important;
        }
        
        .gallery-item:hover {
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.4);
        }
        
        .gallery-placeholder {
            color: #888;
            font-size: 8px;
            text-align: center;
            font-weight: 500;
        }
        
        .settings-group {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 15px;
        }
        
        .settings-group h3 {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 12px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-label {
            font-size: 11px;
            color: #ccc;
        }
        
        .setting-toggle {
            width: 40px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .setting-toggle.active {
            background: #007BFF;
        }
        
        .setting-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: #fff;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .setting-toggle.active::after {
            transform: translateX(20px);
        }
        
        /* Leaderboard Styles */
        .leaderboard-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .leaderboard-scrollable {
            flex: 1;
            overflow-y: auto;
            padding-right: 8px;
            margin-right: -4px;
        }
        
        .leaderboard-scrollable::-webkit-scrollbar {
            width: 3px;
        }
        
        .leaderboard-scrollable::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }
        
        .leaderboard-scrollable::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }
        
        body.light-theme .leaderboard-scrollable::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        
        body.light-theme .leaderboard-scrollable::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.3);
        }
        
        .leaderboard-fixed-rank {
            flex-shrink: 0;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        
        body.light-theme .leaderboard-fixed-rank {
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            transition: all 0.3s ease;
        }
        
        body.light-theme .leaderboard-item {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.15);
        }
        
        .leaderboard-item.first {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.3);
        }
        
        .leaderboard-item.second {
            background: rgba(220, 220, 220, 0.15);
            border-color: rgba(220, 220, 220, 0.4);
            border-width: 2px;
        }
        
        .leaderboard-item.third {
            background: rgba(205, 127, 50, 0.1);
            border-color: rgba(205, 127, 50, 0.3);
        }
        
        .rank-sticker {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            margin-right: 10px;
            font-size: 12px;
            font-weight: 800;
            position: relative;
        }
        
        .rank-sticker.first {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.8), rgba(255, 193, 7, 0.6));
            color: #000;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
        }
        
        .rank-sticker.second {
            background: linear-gradient(135deg, rgba(220, 220, 220, 0.9), rgba(192, 192, 192, 0.8));
            color: #000;
            box-shadow: 0 0 12px rgba(220, 220, 220, 0.6);
            border: 1.5px solid rgba(255, 255, 255, 0.4);
        }
        
        .rank-sticker.third {
            background: linear-gradient(135deg, rgba(205, 127, 50, 0.8), rgba(184, 115, 51, 0.6));
            color: #fff;
            box-shadow: 0 0 10px rgba(205, 127, 50, 0.4);
        }
        
        .rank-sticker.regular {
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: 10px;
            font-weight: 600;
        }
        
        body.light-theme .rank-sticker.regular {
            background: rgba(0,0,0,0.1);
            color: #2c2c2c;
        }
        
        .user-info {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .username {
            font-weight: 600;
            font-size: 11px;
            color: #e8e9ea;
            transition: all 0.3s ease;
        }
        
        body.light-theme .username {
            color: #1a1a1a;
        }
        
        .username.first {
            font-weight: 800;
            color: #FFD700;
        }
        
        .username.second {
            font-weight: 800;
            color: #E8E8E8;
            text-shadow: 0 0 6px rgba(220, 220, 220, 0.5);
        }
        
        .username.third {
            font-weight: 800;
            color: #CD7F32;
        }
        
        .points {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 10px;
            font-weight: 600;
            color: #888;
            transition: all 0.3s ease;
        }
        
        body.light-theme .points {
            color: #666;
        }
        
        .points.first {
            color: #FFD700;
        }
        
        .points.second {
            color: #E8E8E8;
        }
        
        .points.third {
            color: #CD7F32;
        }
        
        .points-gem {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #FF6B6B, #FF8E8E);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            display: inline-block;
            box-shadow: 0 1px 3px rgba(255, 107, 107, 0.3);
        }
        
        .points-gem::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 3px;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }
        
        .points.first .points-gem {
            background: linear-gradient(135deg, #FFD700, #FFF700);
            box-shadow: 0 1px 3px rgba(255, 215, 0, 0.4);
        }
        
        .points.second .points-gem {
            background: linear-gradient(135deg, #E8E8E8, #FFFFFF);
            box-shadow: 0 1px 3px rgba(232, 232, 232, 0.4);
        }
        
        .points.third .points-gem {
            background: linear-gradient(135deg, #CD7F32, #D4A574);
            box-shadow: 0 1px 3px rgba(205, 127, 50, 0.4);
        }
        
        .current-user-rank {
            background: rgba(0, 123, 255, 0.1);
            border: 2px solid rgba(0, 123, 255, 0.4);
            border-radius: 10px;
            padding: 12px;
            margin-top: 4px;
        }
        
        .current-user-rank .rank-sticker {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.8), rgba(0, 86, 179, 0.6));
            color: #fff;
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.4);
        }
        
        .current-user-rank .username {
            color: #007BFF;
            font-weight: 700;
        }
        
        .rank-separator {
            text-align: center;
            color: #fff;
            font-size: 10px;
            margin: 4px 0 4px 0;
            position: relative;
            transition: all 0.3s ease;
        }
        
        body.light-theme .rank-separator {
            color: #2c2c2c;
        }
        
        .rank-separator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(255,255,255,0.1);
            z-index: 1;
            transition: all 0.3s ease;
        }
        
        body.light-theme .rank-separator::before {
            background: rgba(0,0,0,0.1);
        }
        
        .rank-separator span {
            background: #1a1a1a;
            padding: 0 12px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        body.light-theme .rank-separator span {
            background: #ffffff;
        }
        
        /* POD Styles */
        .pod-image {
            width: 100%;
            max-height: 280px;
            min-height: 180px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255,255,255,0.2);
            overflow: hidden;
        }
        
        .pod-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .pod-description {
            font-size: 11px;
            line-height: 1.5;
            color: #ccc;
            transition: all 0.3s ease;
        }
        
        body.light-theme .pod-description {
            color: #495057;
        }
        
        /* Learning Styles */
        .tip-card {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        body.light-theme .tip-card {
            background: rgba(0,0,0,0.03);
            border-color: rgba(0,0,0,0.15);
        }
        
        .tip-card:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }
        
        body.light-theme .tip-card:hover {
            background: rgba(0,0,0,0.06);
            border-color: rgba(0,0,0,0.25);
        }
        
        .tip-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .tip-title {
            color: #1a1a1a;
        }
        
        .tip-content {
            font-size: 10px;
            color: #ccc;
            line-height: 1.4;
            transition: all 0.3s ease;
        }
        
        body.light-theme .tip-content {
            color: #495057;
        }
        
        body.light-theme .tutorial-title {
            color: #1a1a1a !important;
        }
        
        body.light-theme .profile-text {
            color: #1a1a1a !important;
        }
        
        body.light-theme .profile-stat {
            color: #1a1a1a !important;
        }
        
        body.light-theme .activity-title {
            color: #1a1a1a !important;
        }
        
        /* Spotlight Purchase Modal */
        .spotlight-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .spotlight-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .spotlight-modal-content {
            background: #1a1a1a;
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 24px;
            max-width: 320px;
            width: 90%;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        body.light-theme .spotlight-modal-content {
            background: #ffffff;
            border-color: rgba(0,0,0,0.15);
        }
        
        .spotlight-modal-title {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .spotlight-modal-title {
            color: #1a1a1a;
        }
        
        .spotlight-modal-subtitle {
            font-size: 12px;
            color: #b8bcc8;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .spotlight-modal-subtitle {
            color: #495057;
        }
        
        .spotlight-modal-price {
            font-size: 24px;
            font-weight: 800;
            color: #10B981;
            margin: 16px 0;
        }
        
        .spotlight-modal-duration {
            font-size: 11px;
            color: #888;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .spotlight-modal-duration {
            color: #666;
        }
        
        .spotlight-modal-input {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 12px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        body.light-theme .spotlight-modal-input {
            background: rgba(0,0,0,0.05);
            border-color: rgba(0,0,0,0.2);
            color: #1a1a1a;
        }
        
        .spotlight-modal-input:focus {
            outline: none;
            border-color: #007BFF;
            background: rgba(255,255,255,0.15);
        }
        
        body.light-theme .spotlight-modal-input:focus {
            background: rgba(0,0,0,0.08);
        }
        
        .spotlight-modal-input::placeholder {
            color: rgba(255,255,255,0.5);
            font-size: 11px;
        }
        
        body.light-theme .spotlight-modal-input::placeholder {
            color: rgba(0,0,0,0.4);
        }
        
        .spotlight-modal-buttons {
            display: flex;
            gap: 12px;
        }
        
        .spotlight-modal-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .spotlight-modal-btn.buy {
            background: #007BFF;
            color: #fff;
        }
        
        .spotlight-modal-btn.buy:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        .spotlight-modal-btn.cancel {
            background: #DC3545;
            color: #fff;
        }
        
        .spotlight-modal-btn.cancel:hover {
            background: #c82333;
            transform: translateY(-1px);
        }
        
        .spotlight-locked {
            border: 2px solid #10B981 !important;
            background: rgba(16, 185, 129, 0.1) !important;
        }
        
        .spotlight-owned {
            border: 2px solid #10B981 !important;
            background: rgba(16, 185, 129, 0.1) !important;
        }
        
        .spotlight-available {
            border: 2px solid #6B7280 !important;
            background: rgba(107, 114, 128, 0.1) !important;
        }
        
        .spotlight-timer {
            position: absolute;
            bottom: 4px;
            right: 4px;
            background: rgba(0,0,0,0.8);
            color: #fff;
            font-size: 8px;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Camera Styles */
        .camera-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 2000;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .camera-screen.show {
            display: flex;
        }
        
        .camera-viewport {
            flex: 1;
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
        
        .camera-video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            transform: scaleX(-1);
        }
        
        .camera-video.back-camera {
            transform: scaleX(1);
        }
        
        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .grid-overlay.active {
            opacity: 0.5;
        }
        
        /* Grid styles for full screen */
        .grid-3x3.grid-full {
            border: 2px solid rgba(255,255,255,0.8);
            background-image: 
                linear-gradient(to right, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px)),
                linear-gradient(to bottom, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px));
        }
        
        .grid-symmetrical.grid-full {
            border: 2px solid rgba(255,255,255,0.8);
            background-image: 
                linear-gradient(to right, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px)),
                linear-gradient(to bottom, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px));
        }
        
        /* Grid styles for 1:1 aspect ratio */
        .grid-3x3.grid-1-1 {
            border-top: 2px solid rgba(255,255,255,0.8);
            border-bottom: 2px solid rgba(255,255,255,0.8);
            border-left: none;
            border-right: none;
            top: calc(50% - 25%);
            height: 50%;
            background-image: 
                linear-gradient(to right, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px)),
                linear-gradient(to bottom, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px));
        }
        
        .grid-symmetrical.grid-1-1 {
            border-top: 2px solid rgba(255,255,255,0.8);
            border-bottom: 2px solid rgba(255,255,255,0.8);
            border-left: none;
            border-right: none;
            top: calc(50% - 25%);
            height: 50%;
            background-image: 
                linear-gradient(to right, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px)),
                linear-gradient(to bottom, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px));
        }
        
        /* Grid styles for 3:4 aspect ratio */
        .grid-3x3.grid-3-4 {
            border-top: 2px solid rgba(255,255,255,0.8);
            border-bottom: 2px solid rgba(255,255,255,0.8);
            border-left: none;
            border-right: none;
            top: calc(50% - 37.5%);
            height: 75%;
            background-image: 
                linear-gradient(to right, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px)),
                linear-gradient(to bottom, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px));
        }
        
        .grid-symmetrical.grid-3-4 {
            border-top: 2px solid rgba(255,255,255,0.8);
            border-bottom: 2px solid rgba(255,255,255,0.8);
            border-left: none;
            border-right: none;
            top: calc(50% - 37.5%);
            height: 75%;
            background-image: 
                linear-gradient(to right, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px)),
                linear-gradient(to bottom, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px));
        }
        

        
        /* Default grid styles (fallback) */
        .grid-3x3 {
            border: 2px solid rgba(255,255,255,0.8);
            background-image: 
                linear-gradient(to right, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px)),
                linear-gradient(to bottom, transparent 33.33%, rgba(255,255,255,0.8) 33.33%, rgba(255,255,255,0.8) calc(33.33% + 2px), transparent calc(33.33% + 2px), transparent 66.66%, rgba(255,255,255,0.8) 66.66%, rgba(255,255,255,0.8) calc(66.66% + 2px), transparent calc(66.66% + 2px));
        }
        
        .grid-symmetrical {
            border: 2px solid rgba(255,255,255,0.8);
            background-image: 
                linear-gradient(to right, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px)),
                linear-gradient(to bottom, transparent 50%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0.8) calc(50% + 2px), transparent calc(50% + 2px));
        }
        
        .aspect-ratio-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            transition: all 0.3s ease;
            background: transparent;
        }
        
        /* 1:1 square aspect ratio - vertical crop for tablets, horizontal for desktop */
        .aspect-ratio-overlay.ratio-1-1 {
            background: 
                linear-gradient(to bottom, 
                    rgba(0,0,0,1) 0%, 
                    rgba(0,0,0,1) calc(50% - 25%), 
                    transparent calc(50% - 25%), 
                    transparent calc(50% + 25%), 
                    rgba(0,0,0,1) calc(50% + 25%), 
                    rgba(0,0,0,1) 100%);
        }
        
        /* 3:4 portrait aspect ratio - vertical crop for tablets, horizontal for desktop */
        .aspect-ratio-overlay.ratio-3-4 {
            background: 
                linear-gradient(to bottom, 
                    rgba(0,0,0,1) 0%, 
                    rgba(0,0,0,1) calc(50% - 37.5%), 
                    transparent calc(50% - 37.5%), 
                    transparent calc(50% + 37.5%), 
                    rgba(0,0,0,1) calc(50% + 37.5%), 
                    rgba(0,0,0,1) 100%);
        }
        
        /* Desktop: horizontal crop for aspect ratios */
        @media (min-width: 1024px) {
            .aspect-ratio-overlay.ratio-1-1 {
                background: 
                    linear-gradient(to right, 
                        rgba(0,0,0,1) 0%, 
                        rgba(0,0,0,1) calc(50% - 25%), 
                        transparent calc(50% - 25%), 
                        transparent calc(50% + 25%), 
                        rgba(0,0,0,1) calc(50% + 25%), 
                        rgba(0,0,0,1) 100%);
            }
            
            .aspect-ratio-overlay.ratio-3-4 {
                background: 
                    linear-gradient(to right, 
                        rgba(0,0,0,1) 0%, 
                        rgba(0,0,0,1) calc(50% - 37.5%), 
                        transparent calc(50% - 37.5%), 
                        transparent calc(50% + 37.5%), 
                        rgba(0,0,0,1) calc(50% + 37.5%), 
                        rgba(0,0,0,1) 100%);
            }
        }
        

        
        .camera-controls-top {
            position: absolute;
            top: max(20px, env(safe-area-inset-top, 20px));
            left: max(20px, env(safe-area-inset-left, 20px));
            right: max(20px, env(safe-area-inset-right, 20px));
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 10;
        }
        
        .camera-controls-left {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .camera-controls-right {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end;
        }
        
        .camera-controls-bottom {
            position: absolute;
            bottom: max(20px, env(safe-area-inset-bottom, 20px));
            left: max(15px, env(safe-area-inset-left, 15px));
            right: max(15px, env(safe-area-inset-right, 15px));
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            z-index: 10;
        }
        
        /* Camera controls positioning - keep original spacing */
        
        .camera-btn {
            width: 44px;
            height: 44px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            font-weight: 500;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .camera-btn:hover {
            background: rgba(0,0,0,0.8);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.05);
        }
        
        .camera-btn.active {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.6);
        }
        
        .zoom-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: auto;
            height: 32px;
        }
        
        .zoom-btn {
            width: 32px;
            height: 32px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 10px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .zoom-btn.active {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.6);
        }
        
        .zoom-btn:hover {
            background: rgba(0,0,0,0.8);
            border-color: rgba(255,255,255,0.5);
        }
        
        .aspect-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .aspect-btn {
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 9px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .aspect-btn.active {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.6);
        }
        
        .aspect-btn:hover {
            transform: scale(1.05);
        }
        
        .gallery-upload-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0,0,0,0.6);
            border: 2px solid rgba(255,255,255,0.4);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .gallery-upload-btn:hover {
            background: rgba(0,0,0,0.8);
            border-color: rgba(255,255,255,0.6);
            transform: scale(1.05);
        }
        
        /* Desktop: move gallery button further left */
        @media (min-width: 1024px) {
            #galleryBtn {
                left: calc(50% - 110px) !important;
            }
        }
        
        .capture-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            border: 4px solid rgba(255,255,255,0.6);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .capture-button:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,1);
        }
        
        .capture-button:active {
            transform: scale(0.95);
        }
        
        .capture-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            background: #6C9BD1;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s ease;
        }
        
        .capture-button:active::after {
            width: 40px;
            height: 40px;
        }
        
        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 72px;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 0 20px rgba(0,0,0,0.8);
            z-index: 100;
            display: none;
        }
        
        .photo-preview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }
        
        .photo-preview.show {
            display: flex;
        }
        
        .preview-image {
            max-width: 90%;
            max-height: 70%;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        
        .preview-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
            max-width: 280px;
        }
        
        .preview-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 10px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 11px;
            backdrop-filter: blur(10px);
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            min-height: 40px;
        }
        
        .preview-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
        }
        
        .preview-btn.primary {
            background: rgba(0,123,255,0.8);
            border-color: rgba(0,123,255,1);
        }
        
        .preview-btn.primary:hover {
            background: rgba(0,123,255,1);
        }
        
        .preview-btn.success {
            background: rgba(40,167,69,0.8);
            border-color: rgba(40,167,69,1);
        }
        
        .preview-btn.success:hover {
            background: rgba(40,167,69,1);
        }
        
        .preview-btn.secondary {
            background: rgba(108,117,125,0.8);
            border-color: rgba(108,117,125,1);
        }
        
        .preview-btn.secondary:hover {
            background: rgba(108,117,125,1);
        }
        
        .preview-btn.disabled {
            background: rgba(108,117,125,0.4);
            border-color: rgba(108,117,125,0.6);
            color: rgba(255,255,255,0.5);
            cursor: not-allowed;
        }
        
        .preview-btn.disabled:hover {
            background: rgba(108,117,125,0.4);
            border-color: rgba(108,117,125,0.6);
            transform: none;
        }
        
        .camera-error {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #fff;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        

        

    </style>
</head>
<body>
    <div class="app-container">
        <!-- Animated Background -->
        <div class="bg-animation">
            <div class="lens-flare"></div>
            <div class="lens-flare"></div>
            <div class="lens-flare"></div>
        </div>
        
        <!-- Main Home Page -->
        <div class="content" id="homePage">
            <!-- Header -->
            <div class="header">
                <div class="logo-section">
                    <div class="lens-logo"></div>
                    <h1 class="app-title">LENS APP</h1>
                </div>
                <div class="header-controls">
                    <button class="theme-toggle" onclick="toggleTheme(this)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                        </svg>
                    </button>
                    <button class="connect-wallet" onclick="openPage('wallet')">Connect Wallet</button>
                </div>
            </div>
            
            <!-- Daily Slogan -->
            <div class="daily-slogan">
                <div class="slogan-text" id="dynamicSlogan">Capture the moment with $LENS</div>
            </div>
            
            <!-- Tabs -->
            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-button" onclick="switchTab('leaderboard')">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="13" width="4" height="8" rx="1"/>
                            <rect x="10" y="9" width="4" height="12" rx="1"/>
                            <rect x="17" y="5" width="4" height="16" rx="1"/>
                            <line x1="1" y1="22" x2="23" y2="22"/>
                        </svg>
                    </button>
                    <button class="tab-button active" onclick="switchTab('pod')" style="letter-spacing: 1px;">P &nbsp; O &nbsp; D</button>
                    <button class="tab-button" onclick="switchTab('learning')">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M6 9.5v6.5l6 3 6-3v-6.5"/>
                            <circle cx="12" cy="12" r="1" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
                
                <div class="tab-content">
                    <!-- Leaderboard Tab -->
                    <div class="tab-panel" id="leaderboard">
                        <div class="leaderboard-container">
                            <div class="leaderboard-scrollable">
                                <div class="rank-separator">
                                    <span>LENS App Leaderboard</span>
                                </div>
                                <div id="leaderboardList">
                                    <!-- Top 100 users will be populated by JavaScript -->
                                </div>
                            </div>
                            
                            <div class="leaderboard-fixed-rank">
                                <div class="rank-separator">
                                    <span>Your Rank</span>
                                </div>
                                <div class="leaderboard-item current-user-rank">
                                    <div class="rank-sticker">
                                        <span>247</span>
                                    </div>
                                    <div class="user-info">
                                        <div class="username">photographer.eth</div>
                                        <div class="points">
                                            <span class="points-gem"></span>
                                            8,420 points
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- POD Tab -->
                    <div class="tab-panel active" id="pod">
                        <div class="pod-image" onclick="window.open('https://farcaster.xyz/nimaleophotos.eth/0xad23b3a2', '_blank')" style="cursor: pointer;">
                            <img src="https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3" 
                                 alt="Camel Rock by Nima Leo"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div style="width: 100%; height: 100%; display: none; align-items: center; justify-content: center; flex-direction: column; color: #888;">
                                <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                    <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                                    <circle cx="12" cy="13" r="3"/>
                                </svg>
                                <p style="margin-top: 8px; font-size: 10px;">Image loading...</p>
                            </div>
                        </div>
                        <div class="pod-description">
                            <strong style="font-weight: 700;">Today's Featured Photo (Picture of The Day)</strong><br><br>
                            
                            <strong>Title:</strong> Camel Rock<br><br>
                            
                            <strong>Artist Name:</strong> <a href="https://farcaster.xyz/nimaleophotos.eth" target="_blank" style="color: #007BFF; text-decoration: none; font-weight: 600; border-bottom: 1px solid rgba(0, 123, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.color='#0056b3'; this.style.borderBottomColor='rgba(0, 86, 179, 0.5)'" onmouseout="this.style.color='#007BFF'; this.style.borderBottomColor='rgba(0, 123, 255, 0.3)'">Nima Leo @nimaleophotos</a><br><br>
                            
                            <strong>Description:</strong> A breathtaking capture of the iconic Camel Rock formation, showcasing the raw beauty and geological wonder of this natural landmark. The composition masterfully balances the rugged textures against the expansive sky, creating a powerful visual narrative.
                        </div>
                        
                        <!-- Featured Photos Section -->
                        <div style="margin-top: 20px;">
                            <h3 style="font-size: 14px; font-weight: 700; margin-bottom: 12px; color: #fff; transition: all 0.3s ease;" class="featured-spots-title">Spotlight Spots</h3>
                            <div class="gallery-grid">
                                <div class="gallery-item" id="spotlight-1" onclick="handleSpotlightClick(1)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #1</div>
                                </div>
                                <div class="gallery-item" id="spotlight-2" onclick="handleSpotlightClick(2)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #2</div>
                                </div>
                                <div class="gallery-item" id="spotlight-3" onclick="handleSpotlightClick(3)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #3</div>
                                </div>
                                <div class="gallery-item" id="spotlight-4" onclick="handleSpotlightClick(4)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #4</div>
                                </div>
                                <div class="gallery-item" id="spotlight-5" onclick="handleSpotlightClick(5)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #5</div>
                                </div>
                                <div class="gallery-item" id="spotlight-6" onclick="handleSpotlightClick(6)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #6</div>
                                </div>
                                <div class="gallery-item" id="spotlight-7" onclick="handleSpotlightClick(7)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #7</div>
                                </div>
                                <div class="gallery-item" id="spotlight-8" onclick="handleSpotlightClick(8)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #8</div>
                                </div>
                                <div class="gallery-item" id="spotlight-9" onclick="handleSpotlightClick(9)" style="cursor: pointer;">
                                    <div class="gallery-placeholder">Spotlight<br>Spot #9</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Learning Tab -->
                    <div class="tab-panel" id="learning">
                        <h2 style="font-size: 16px; font-weight: 700; margin-bottom: 15px; text-align: center; color: #fff; transition: all 0.3s ease;" class="tutorial-title">Photography Tutorials</h2>
                        
                        <!-- Photography Basics Section -->
                        <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 10px 0; color: #fff; transition: all 0.3s ease;" class="tutorial-section-title">📸 Photography Fundamentals</h3>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Mobile Photography</div>
                            <div class="tip-content">Master the art of photography using your smartphone. Learn composition, lighting, and editing techniques specifically for mobile devices.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Basic Photography</div>
                            <div class="tip-content">Foundation skills every photographer needs. Understand exposure, aperture, shutter speed, and ISO to take control of your camera.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Intermediate Photography</div>
                            <div class="tip-content">Advanced composition techniques, creative lighting setups, and post-processing workflows to elevate your photography skills.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Pro Photography</div>
                            <div class="tip-content">Professional techniques, business skills, client management, and advanced equipment usage for commercial photography success.</div>
                        </div>
                        
                        <!-- Composition & Techniques Section -->
                        <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 10px 0; color: #fff; transition: all 0.3s ease;" class="tutorial-section-title">🎨 Composition & Techniques</h3>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Rule of Thirds</div>
                            <div class="tip-content">Learn the fundamental composition rule that creates balanced and visually appealing photographs.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Leading Lines</div>
                            <div class="tip-content">Use lines in your composition to guide the viewer's eye and create dynamic, engaging images.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Depth of Field</div>
                            <div class="tip-content">Master aperture control to create stunning bokeh effects and control what's in focus in your images.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Golden Hour Photography</div>
                            <div class="tip-content">Capture magical lighting during the golden hour for warm, soft, and professionally lit photographs.</div>
                        </div>
                        
                        <!-- Post Processing Section -->
                        <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 10px 0; color: #fff; transition: all 0.3s ease;" class="tutorial-section-title">✨ Post Processing Tutorials</h3>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Lightroom Basics</div>
                            <div class="tip-content">Essential Lightroom skills for organizing, editing, and enhancing your photos with professional results.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Photoshop Fundamentals</div>
                            <div class="tip-content">Learn core Photoshop techniques for advanced photo manipulation, retouching, and creative editing.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Mobile Editing Apps</div>
                            <div class="tip-content">Master mobile editing with apps like VSCO, Snapseed, and Adobe Lightroom Mobile for on-the-go processing.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Color Grading</div>
                            <div class="tip-content">Create cinematic looks and moods through advanced color grading techniques and color theory.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">HDR Processing</div>
                            <div class="tip-content">Combine multiple exposures to create stunning high dynamic range images with perfect exposure throughout.</div>
                        </div>
                        
                        <!-- Genre-Specific Section -->
                        <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 10px 0; color: #fff; transition: all 0.3s ease;" class="tutorial-section-title">🌟 Photography Genres</h3>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Portrait Photography</div>
                            <div class="tip-content">Master lighting, posing, and connection techniques for compelling portrait photography.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Landscape Photography</div>
                            <div class="tip-content">Capture breathtaking landscapes with proper planning, composition, and technical execution.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Street Photography</div>
                            <div class="tip-content">Document life as it happens with candid street photography techniques and ethical considerations.</div>
                        </div>
                        <div class="tip-card" onclick="openTutorial()">
                            <div class="tip-title">Macro Photography</div>
                            <div class="tip-content">Explore the tiny world through macro photography, from equipment to technique and lighting.</div>
                        </div>
                    </div>
                </div>
            </div>
            

            
            <!-- Bottom Navigation -->
            <div class="bottom-nav">
                <div class="nav-buttons-container">
                    <button class="nav-button" onclick="openPage('info')">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"/>
                            <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="currentColor">?</text>
                        </svg>
                        Info
                    </button>
                    <button class="nav-button" onclick="openPage('competition')">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                            <path d="M4 22h16"/>
                            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
                            <circle cx="12" cy="6" r="1.5" fill="currentColor"/>
                        </svg>
                        Competition
                    </button>
                    <button class="nav-button camera-button" onclick="openCamera()">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                            <circle cx="12" cy="13" r="3"/>
                        </svg>
                        Camera
                    </button>
                    <button class="nav-button" onclick="openPage('rewards')">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            <circle cx="12" cy="12" r="3" fill="currentColor" opacity="0.3"/>
                        </svg>
                        Rewards
                    </button>
                    <button class="nav-button" onclick="openPage('gallery')">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21,15 16,10 5,21"/>
                            <text x="12" y="20" text-anchor="middle" font-size="6" font-weight="bold" fill="currentColor">LENS</text>
                        </svg>
                        LENS&nbsp;Gallery
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Full Page Screens -->
        <!-- Info Page -->
        <div class="page-screen" id="infoPage">
            <div class="page-header">
                <button class="back-button" onclick="closePage()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="page-title">App Information</div>
                <div style="width: 50px;"></div>
            </div>
            <div class="page-content">
                <div class="info-section">
                    <h3>Welcome to LENS APP</h3>
                    <p>LENS APP is the premier photography community on Farcaster, connecting photographers worldwide through the power of blockchain technology and social interaction.</p>
                    <p>Share your work, compete in daily challenges, and discover amazing photography from creators around the globe.</p>
                    <p style="margin-top: 12px;">
                        <a href="https://farcaster.xyz/lensapp" target="_blank">
                            Visit our Farcaster profile →
                        </a>
                    </p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>📸 Photo Sharing</h4>
                        <p>Upload and share your best photography with the community. Get feedback and recognition for your creative work.</p>
                    </div>
                    <div class="feature-card">
                        <h4>🏆 Competitions</h4>
                        <p>Participate in daily, weekly, and monthly photography competitions with exciting prizes and recognition.</p>
                    </div>
                    <div class="feature-card">
                        <h4>📊 Leaderboards</h4>
                        <p>Track your progress and see how you rank against other photographers in the community.</p>
                    </div>
                    <div class="feature-card">
                        <h4>🎓 Learning</h4>
                        <p>Access tutorials and tips from professional photographers to improve your skills.</p>
                    </div>
                </div>
                
                <div class="info-section">
                    <h3>About $LENS Token</h3>
                    <p>Earn $LENS tokens by participating in the community, winning competitions, and sharing quality content. Use your tokens to unlock premium features and exclusive content.</p>
                </div>
            </div>
        </div>
        
        <!-- Competition Page -->
        <div class="page-screen" id="competitionPage">
            <div class="page-header">
                <button class="back-button" onclick="closePage()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="page-title">Photography Competitions</div>
                <div style="width: 50px;"></div>
            </div>
            <div class="page-content">
                <div class="competition-item">
                    <div class="competition-title">🏆 Daily Photo Challenge</div>
                    <div class="competition-description">Submit your best photo of the day based on our daily theme. Winners are selected every 24 hours and featured on the main page.</div>
                    <div class="competition-prize">Prize: 100 $LENS + Featured Spot</div>
                </div>
                
                <div class="competition-item">
                    <div class="competition-title">🎯 Weekly Theme Contest</div>
                    <div class="competition-description">Each week features a specific photography theme. Create and submit photos that best represent the weekly challenge.</div>
                    <div class="competition-prize">Prize: 500 $LENS + Gallery Feature</div>
                </div>
                
                <div class="competition-item">
                    <div class="competition-title">📱 Mobile Photography Masters</div>
                    <div class="competition-description">Showcase the power of mobile photography. Only photos taken with smartphones are eligible for this monthly competition.</div>
                    <div class="competition-prize">Prize: 1000 $LENS + Pro Badge</div>
                </div>
                
                <div class="competition-item">
                    <div class="competition-title">🌟 Monthly Portfolio Review</div>
                    <div class="competition-description">Submit your best 5 photos for professional review and feedback from industry experts.</div>
                    <div class="competition-prize">Prize: Professional Feedback + Mentorship</div>
                </div>
                
                <div class="competition-item">
                    <div class="competition-title">🏅 Annual Photography Awards</div>
                    <div class="competition-description">The biggest competition of the year! Multiple categories including Portrait, Landscape, Street, and Abstract photography.</div>
                    <div class="competition-prize">Prize: 10,000 $LENS + NFT Collection</div>
                </div>
            </div>
        </div>
        
        <!-- Gallery Page -->
        <div class="page-screen" id="galleryPage">
            <div class="page-header">
                <button class="back-button" onclick="closePage()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="page-title">LENS Gallery</div>
                <div style="width: 50px;"></div>
            </div>
            <div class="page-content">
                <div class="info-section">
                    <h3>Featured Collections</h3>
                    <p>Discover the best photography from our community, curated by experts and voted by users.</p>
                </div>
                
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #1</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #2</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #3</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #4</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #5</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #6</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #7</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #8</div>
                    </div>
                    <div class="gallery-item">
                        <div class="gallery-placeholder">Featured<br>Photo #9</div>
                    </div>
                </div>
                
                <div class="info-section">
                    <h3>Community Showcase</h3>
                    <p>Recent uploads from photographers in our community. Vote for your favorites to help them climb the leaderboard!</p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>🔥 Trending Now</h4>
                        <p>The most popular photos this week, based on community votes and engagement.</p>
                    </div>
                    <div class="feature-card">
                        <h4>📱 My Portfolio</h4>
                        <p>View and manage your uploaded photos, track their performance, and see engagement stats.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Wallet Profile Page -->
        <div class="page-screen" id="walletPage">
            <div class="page-header">
                <button class="back-button" onclick="closePage()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="page-title">Wallet Profile</div>
                <div style="width: 50px;"></div>
            </div>
            <div class="page-content">
                <div class="info-section" style="background: rgba(0, 123, 255, 0.1); border-color: rgba(0, 123, 255, 0.3);">
                    <div style="display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #007BFF, #0056b3); display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 800; color: white; flex-shrink: 0;">P</div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0 0 4px 0; font-size: 18px; color: #007BFF;">photographer.eth</h3>
                            <p style="margin: 0 0 8px 0; font-size: 11px; color: #888;">Connected Wallet</p>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                <span style="font-size: 11px; color: #ccc;">Wallet Address</span>
                                <span style="font-size: 10px; font-weight: 600; color: #888; cursor: pointer; transition: all 0.3s ease;" onclick="copyAddress()" onmouseover="this.style.color='#aaa'" onmouseout="this.style.color='#888'">0x742d...A8C3</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Token Balances -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 16px; font-weight: 700; color: #fff;">8,420</div>
                            <div style="font-size: 9px; color: #ccc;">Points</div>
                        </div>
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 16px; font-weight: 700; color: #fff;">8,420</div>
                            <div style="font-size: 9px; color: #ccc;">$LENS</div>
                        </div>
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 16px; font-weight: 700; color: #fff;">2.45</div>
                            <div style="font-size: 9px; color: #ccc;">$ETH</div>
                        </div>
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 16px; font-weight: 700; color: #fff;">1,250</div>
                            <div style="font-size: 9px; color: #ccc;">$USDC</div>
                        </div>
                    </div>
                    
                    <!-- Rankings -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 18px; font-weight: 700; color: #fff;">#247</div>
                            <div style="font-size: 10px; color: #ccc;">Lens App Rank</div>
                        </div>
                        <div style="text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 18px; font-weight: 700; color: #fff;">#1,842</div>
                            <div style="font-size: 10px; color: #ccc;">Lens Empire Rank</div>
                        </div>
                    </div>
                </div>

                <div class="info-section" style="padding: 15px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                            <path d="M9 11H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-4"/>
                            <polyline points="9,11 12,14 15,11"/>
                            <line x1="12" y1="2" x2="12" y2="14"/>
                        </svg>
                        <h3 style="font-size: 14px; margin: 0;">Account Statistics</h3>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 11px;">
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Photos Uploaded</span>
                            <span style="font-weight: 700; color: #fff;">127</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Competitions Won</span>
                            <span style="font-weight: 700; color: #fff;">3</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Followers</span>
                            <span style="font-weight: 700; color: #fff;">1,284</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Spotlight Spots</span>
                            <span style="font-weight: 700; color: #fff;">12</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Spotlight Likes</span>
                            <span style="font-weight: 700; color: #fff;">2,847</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">USDC Spent</span>
                            <span style="font-weight: 700; color: #fff;">$12.00 USDC</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Total Likes</span>
                            <span style="font-weight: 700; color: #fff;">5,672</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: #ccc;">Profile Views</span>
                            <span style="font-weight: 700; color: #fff;">8,934</span>
                        </div>
                    </div>
                </div>

                <div class="info-section" style="padding: 12px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            <circle cx="12" cy="12" r="4" fill="#FFD700" opacity="0.3"/>
                        </svg>
                        <h3 style="font-size: 13px; margin: 0;">Achievements Unlocked</h3>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 10px;">
                        <div style="display: flex; align-items: center; gap: 8px; padding: 8px; background: rgba(255, 215, 0, 0.1); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 6px;">
                            <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #FFD700, #FFA500); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </div>
                            <div>
                                <div style="font-weight: 700; color: #FFD700;">First Place Winner</div>
                                <div style="color: #888; font-size: 9px;">Won daily competition</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; padding: 8px; background: rgba(0, 123, 255, 0.1); border: 1px solid rgba(0, 123, 255, 0.3); border-radius: 6px;">
                            <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #007BFF, #0056b3); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="white">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                    <line x1="8" y1="21" x2="16" y2="21"/>
                                    <line x1="12" y1="17" x2="12" y2="21"/>
                                    <circle cx="9" cy="9" r="2"/>
                                    <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                </svg>
                            </div>
                            <div>
                                <div style="font-weight: 700; color: #007BFF;">Mobile Master</div>
                                <div style="color: #888; font-size: 9px;">100+ mobile photos</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; padding: 8px; background: rgba(40, 167, 69, 0.1); border: 1px solid rgba(40, 167, 69, 0.3); border-radius: 6px;">
                            <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #28A745, #1e7e34); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="white">
                                    <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12H9l4-8 4 8h-2a2.5 2.5 0 0 0 2.5 2.5"/>
                                    <path d="M12 2v20"/>
                                </svg>
                            </div>
                            <div>
                                <div style="font-weight: 700; color: #28A745;">Week Streak</div>
                                <div style="color: #888; font-size: 9px;">7-day login streak</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; padding: 8px; background: rgba(220, 53, 69, 0.1); border: 1px solid rgba(220, 53, 69, 0.3); border-radius: 6px;">
                            <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #DC3545, #c82333); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="white">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                </svg>
                            </div>
                            <div>
                                <div style="font-weight: 700; color: #DC3545;">Community Favorite</div>
                                <div style="color: #888; font-size: 9px;">500+ likes received</div>
                            </div>
                        </div>
                    </div>
                </div>



                <div class="info-section">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                            <circle cx="12" cy="12" r="3" fill="#10B981" opacity="0.3"/>
                        </svg>
                        <h3 style="font-size: 13px; margin: 0;">Recent Activity</h3>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                                    <circle cx="12" cy="13" r="3"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Uploaded new photo</div>
                                <div style="font-size: 8px; color: #888;">2 hours ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+25 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Won daily competition</div>
                                <div style="font-size: 8px; color: #888;">1 day ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+100 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M9 12l2 2 4-4"/>
                                    <circle cx="12" cy="12" r="10"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Daily login bonus</div>
                                <div style="font-size: 8px; color: #888;">1 day ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+10 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Photo received 50 likes</div>
                                <div style="font-size: 8px; color: #888;">2 days ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+15 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                    <circle cx="9" cy="7" r="4"/>
                                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Gained 5 new followers</div>
                                <div style="font-size: 8px; color: #888;">3 days ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+20 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                    <path d="M2 17l10 5 10-5"/>
                                    <path d="M6 9.5v6.5l6 3 6-3v-6.5"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Completed tutorial</div>
                                <div style="font-size: 8px; color: #888;">4 days ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+30 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M9 11H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-4"/>
                                    <polyline points="9,11 12,14 15,11"/>
                                    <line x1="12" y1="2" x2="12" y2="14"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Bought spotlight spot</div>
                                <div style="font-size: 8px; color: #888;">5 days ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+5 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M8 3l4 8 5-5v11H3V6l5-3z"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Photo featured in gallery</div>
                                <div style="font-size: 8px; color: #888;">6 days ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+50 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Reached 1000 followers</div>
                                <div style="font-size: 8px; color: #888;">1 week ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+75 points</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 6px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <div style="width: 16px; height: 16px; background: #10B981; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="8" height="8" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
                                </svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 10px; color: #fff; transition: all 0.3s ease;" class="activity-title">Profile customization</div>
                                <div style="font-size: 8px; color: #888;">1 week ago</div>
                            </div>
                            <div style="font-size: 9px; color: #fff; font-weight: 600;">+12 points</div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 8px; margin-top: 15px;">
                    <button style="flex: 1; background: rgba(220, 53, 69, 0.2); border: 1px solid rgba(220, 53, 69, 0.4); color: #DC3545; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 12px;" onclick="disconnectWallet()">
                        Disconnect Wallet
                    </button>
                    <button style="flex: 1; background: rgba(0, 123, 255, 0.2); border: 1px solid rgba(0, 123, 255, 0.4); color: #007BFF; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 12px;" onclick="copyAddress()">
                        Copy Address
                    </button>
                </div>
            </div>
        </div>

        <!-- Rewards Page -->
        <div class="page-screen" id="rewardsPage">
            <div class="page-header">
                <button class="back-button" onclick="closePage()">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="page-title">Rewards & Achievements</div>
                <div style="width: 50px;"></div>
            </div>
            <div class="page-content">
                <div class="info-section">
                    <h3>🏆 Your $LENS Balance</h3>
                    <p style="font-size: 24px; font-weight: 700; color: #FFD700; margin: 10px 0;">8,420 $LENS</p>
                    <p>Earn more $LENS by participating in competitions, sharing quality photos, and engaging with the community!</p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>⭐ Daily Login Bonus</h4>
                        <p>Get 10 $LENS tokens every day you open the app. Streak bonus: +5 $LENS for 7+ days!</p>
                    </div>
                    <div class="feature-card">
                        <h4>📸 Photo Upload Reward</h4>
                        <p>Earn 25 $LENS for each photo you upload. Quality photos get bonus rewards from community votes.</p>
                    </div>
                    <div class="feature-card">
                        <h4>🎯 Competition Prizes</h4>
                        <p>Win big in daily, weekly, and monthly competitions. Top prizes range from 100 to 10,000 $LENS!</p>
                    </div>
                    <div class="feature-card">
                        <h4>👥 Referral Rewards</h4>
                        <p>Invite friends and earn 100 $LENS for each new photographer who joins through your link.</p>
                    </div>
                </div>
                
                <div class="info-section">
                    <h3>🎖️ Achievement Badges</h3>
                    <div class="feature-grid">
                        <div class="feature-card" style="background: rgba(255, 215, 0, 0.1); border-color: rgba(255, 215, 0, 0.3);">
                            <h4>🥇 First Place Winner</h4>
                            <p>Won a daily competition</p>
                        </div>
                        <div class="feature-card" style="background: rgba(0, 123, 255, 0.1); border-color: rgba(0, 123, 255, 0.3);">
                            <h4>📱 Mobile Master</h4>
                            <p>100+ mobile photos uploaded</p>
                        </div>
                        <div class="feature-card" style="opacity: 0.5;">
                            <h4>🔥 Streak Legend</h4>
                            <p>30-day login streak (Locked)</p>
                        </div>
                        <div class="feature-card" style="opacity: 0.5;">
                            <h4>👑 Community Leader</h4>
                            <p>Top 10 leaderboard (Locked)</p>
                        </div>
                    </div>
                </div>
                
                <div class="info-section">
                    <h3>💎 Spend Your $LENS</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>🎨 Premium Filters</h4>
                            <p>Unlock exclusive photo filters and editing tools. Cost: 500 $LENS</p>
                        </div>
                        <div class="feature-card">
                            <h4>⭐ Profile Boost</h4>
                            <p>Feature your profile for 24 hours to gain more followers. Cost: 200 $LENS</p>
                        </div>
                        <div class="feature-card">
                            <h4>🏷️ Custom Badge</h4>
                            <p>Create and display a personalized achievement badge. Cost: 1,000 $LENS</p>
                        </div>
                        <div class="feature-card">
                            <h4>🎁 NFT Minting</h4>
                            <p>Mint your best photos as NFTs directly from the app. Cost: 300 $LENS</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Camera Screen -->
        <div class="camera-screen" id="cameraScreen">
            <div class="camera-viewport">
                <video class="camera-video" id="cameraVideo" autoplay playsinline></video>
                
                <!-- Camera Overlay -->
                <div class="camera-overlay">
                    <div class="grid-overlay" id="gridOverlay"></div>
                    <div class="aspect-ratio-overlay" id="aspectOverlay"></div>

                </div>
                
                <!-- Top Controls -->
                <div class="camera-controls-top">
                    <div class="camera-controls-left">
                        <button class="camera-btn" onclick="closeCamera()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 6L6 18M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="camera-controls-right">
                        <button class="camera-btn" id="flashBtn" onclick="toggleFlash()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="flashIcon">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                        </button>
                        
                        <button class="camera-btn" id="gridBtn" onclick="toggleGrid()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="6" height="6"/>
                                <rect x="15" y="3" width="6" height="6"/>
                                <rect x="3" y="15" width="6" height="6"/>
                                <rect x="15" y="15" width="6" height="6"/>
                            </svg>
                        </button>
                        
                        <button class="camera-btn" onclick="switchCamera()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6"/>
                                <path d="M23 20v-6h-6"/>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                            </svg>
                        </button>
                        
                        <button class="camera-btn" id="timerBtn" onclick="toggleTimer()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12,6 12,12 16,14"/>
                            </svg>
                        </button>
                        
                        <button class="camera-btn" id="aspectBtn" onclick="toggleAspectRatio()">
                            <span style="font-size: 9px; font-weight: 700;">Full</span>
                        </button>
                    </div>
                </div>
                
                <!-- Bottom Controls -->
                <div class="camera-controls-bottom">
                    
                    <!-- Zoom Controls -->
                    <div class="zoom-controls" id="zoomControls">
                        <button class="zoom-btn" onclick="setZoom(0.6)">0.6x</button>
                        <button class="zoom-btn active" onclick="setZoom(1)">1x</button>
                        <button class="zoom-btn" onclick="setZoom(2)">2x</button>
                    </div>
                    
                    <!-- Gallery and Capture Buttons -->
                    <div style="display: flex; align-items: center; justify-content: center; width: 100%; position: relative;">
                        <button class="gallery-upload-btn" onclick="selectFromGallery()" id="galleryBtn" style="position: absolute; left: calc(50% - 90px);">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21,15 16,10 5,21"/>
                            </svg>
                        </button>
                        
                        <!-- Capture Button -->
                        <button class="capture-button" onclick="capturePhoto()"></button>
                    </div>
                </div>
                
                <!-- Timer Display -->
                <div class="timer-display" id="timerDisplay">3</div>
                
                <!-- Error Message -->
                <div class="camera-error" id="cameraError" style="display: none;">
                    <h3>Camera Access Required</h3>
                    <p>Please allow camera access to use this feature.</p>
                    <button class="camera-btn" onclick="requestCameraPermission()" style="margin-top: 10px;">Try Again</button>
                </div>
            </div>
            
            <!-- Photo Preview -->
            <div class="photo-preview" id="photoPreview">
                <!-- Back Button -->
                <button class="camera-btn" onclick="retakePhoto()" style="position: absolute; top: 20px; left: 20px; z-index: 30; width: 44px; height: 44px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"/>
                        <path d="M12 19l-7-7 7-7"/>
                    </svg>
                </button>
                
                <img class="preview-image" id="previewImage" alt="Captured photo">
                <div class="preview-actions" id="previewActions">
                    <button class="preview-btn secondary" onclick="retakePhoto()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 4v6h6"/>
                            <path d="M23 20v-6h-6"/>
                            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                        </svg>
                    </button>
                    <button class="preview-btn primary" onclick="shareOnFarcaster()" style="display: flex; align-items: center; gap: 8px;">
                        <img src="https://github.com/vrypan/farcaster-brand/raw/main/icons/icon-rounded/purple-white.png" 
                             alt="Farcaster" 
                             width="20" 
                             height="20" 
                             style="border-radius: 4px;"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        <span>Share</span>
                    </button>
                    <button class="preview-btn success" onclick="saveToGallery()" style="display: flex; align-items: center; gap: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17,21 17,13 7,13 7,21"/>
                            <polyline points="7,3 7,8 15,8"/>
                        </svg>
                        <span>Save</span>
                    </button>
                    <button class="preview-btn disabled" onclick="mintToLens()" style="display: flex; align-items: center; gap: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 12l2 2 4-4"/>
                            <path d="M12 2v4"/>
                            <path d="M12 18v4"/>
                            <path d="M4.93 4.93l2.83 2.83"/>
                            <path d="M16.24 16.24l2.83 2.83"/>
                            <path d="M2 12h4"/>
                            <path d="M18 12h4"/>
                            <path d="M4.93 19.07l2.83-2.83"/>
                            <path d="M16.24 7.76l2.83-2.83"/>
                        </svg>
                        <span>Mint</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Spotlight Purchase Modal -->
        <div class="spotlight-modal" id="spotlightModal">
            <div class="spotlight-modal-content">
                <div class="spotlight-modal-title">Buy Spotlight Spot</div>
                <div class="spotlight-modal-subtitle">Promote your cast to the community</div>
                <div class="spotlight-modal-price">$1.00</div>
                <div class="spotlight-modal-duration">Duration: 6 hours</div>
                <input type="url" 
                       class="spotlight-modal-input" 
                       id="castUrlInput" 
                       placeholder="Enter your Farcaster cast URL (e.g., https://farcaster.xyz/username/0x123...)"
                       required>
                <div class="spotlight-modal-buttons">
                    <button class="spotlight-modal-btn cancel" onclick="closeSpotlightModal()">Cancel</button>
                    <button class="spotlight-modal-btn buy" onclick="buySpotlightSpot()">Buy</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function connectWallet() {
            const walletButton = document.querySelector('.connect-wallet');
            walletButton.textContent = 'photographer.eth';
        }
        
        function disconnectWallet() {
            const walletButton = document.querySelector('.connect-wallet');
            walletButton.textContent = 'Connect Wallet';
            walletButton.onclick = function() { openPage('wallet'); };
            closePage();
        }
        
        function copyAddress() {
            // Simulate copying address to clipboard
            const address = '0x742d35Cc6C4C0532C58d4698E5982A8C3';
            
            // Create temporary element to copy text
            const tempElement = document.createElement('textarea');
            tempElement.value = address;
            document.body.appendChild(tempElement);
            tempElement.select();
            document.execCommand('copy');
            document.body.removeChild(tempElement);
            
            // Show feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.style.background = 'rgba(40, 167, 69, 0.2)';
            button.style.borderColor = 'rgba(40, 167, 69, 0.4)';
            button.style.color = '#28A745';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = 'rgba(0, 123, 255, 0.2)';
                button.style.borderColor = 'rgba(0, 123, 255, 0.4)';
                button.style.color = '#007BFF';
            }, 2000);
        }
        
        function openTutorial() {
            window.open('https://farcaster.xyz/nimaleophotos.eth', '_blank');
        }
        
        function openPage(pageType) {
            // Hide all pages first
            document.querySelectorAll('.page-screen').forEach(page => {
                page.classList.remove('show');
            });
            
            // Show the selected page
            const page = document.getElementById(pageType + 'Page');
            if (page) {
                page.classList.add('show');
            }
        }
        
        function closePage() {
            // Hide all pages
            document.querySelectorAll('.page-screen').forEach(page => {
                page.classList.remove('show');
            });
        }
        
        function toggleSetting(toggle) {
            toggle.classList.toggle('active');
        }
        
        function toggleTheme(toggle) {
            document.body.classList.toggle('light-theme');
            
            // Update icon based on theme
            const isLight = document.body.classList.contains('light-theme');
            const svg = toggle.querySelector('svg');
            
            if (isLight) {
                // Moon icon for light theme
                svg.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
            } else {
                // Sun icon for dark theme
                svg.innerHTML = '<circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>';
            }
        }
        
        function switchTab(tabName) {
            // Remove active class from all tab buttons and panels
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            
            // Add active class to clicked button and corresponding panel
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        // Generate leaderboard data
        function generateLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            const usernames = [
                'artlens.eth', 'streetphoto.eth', 'blackwhite.eth', 'urbanshot.eth', 'nightcrawler.eth',
                'goldenhour.eth', 'shadowplay.eth', 'minimalist.eth', 'bokehmaster.eth', 'frameseeker.eth',
                'lightchaser.eth', 'momentcapture.eth', 'visualpoet.eth', 'lenscrafted.eth', 'shutterfly.eth',
                'pixelperfect.eth', 'focuspoint.eth', 'aperturepro.eth', 'exposureking.eth', 'composure.eth',
                'darkroom.eth', 'filmgrain.eth', 'analogsoul.eth', 'digitalart.eth', 'photojournal.eth',
                'streetwise.eth', 'portraitpro.eth', 'landscaper.eth', 'macro.eth', 'wildlife.eth',
                'architecture.eth', 'fashion.eth', 'wedding.eth', 'documentary.eth', 'abstract.eth',
                'vintage.eth', 'modern.eth', 'classic.eth', 'creative.eth', 'artistic.eth',
                'professional.eth', 'amateur.eth', 'enthusiast.eth', 'hobbyist.eth', 'collector.eth',
                'curator.eth', 'critic.eth', 'teacher.eth', 'student.eth', 'mentor.eth',
                'snapshot.eth', 'capture.eth', 'shutter.eth', 'exposure.eth', 'focus.eth',
                'lens.eth', 'frame.eth', 'shot.eth', 'click.eth', 'zoom.eth',
                'flash.eth', 'iso.eth', 'aperture.eth', 'depth.eth', 'contrast.eth',
                'saturation.eth', 'brightness.eth', 'highlight.eth', 'shadow.eth', 'midtone.eth',
                'grain.eth', 'noise.eth', 'clarity.eth', 'vibrance.eth', 'hue.eth',
                'temperature.eth', 'tint.eth', 'vignette.eth', 'chromatic.eth', 'distortion.eth',
                'perspective.eth', 'geometry.eth', 'symmetry.eth', 'pattern.eth', 'texture.eth',
                'detail.eth', 'sharpness.eth', 'blur.eth', 'motion.eth', 'freeze.eth',
                'panning.eth', 'tracking.eth', 'focus.eth', 'bokeh.eth', 'dof.eth',
                'hyperfocal.eth', 'infinity.eth', 'macro.eth', 'telephoto.eth', 'wideangle.eth',
                'fisheye.eth', 'prime.eth', 'zoom.eth', 'manual.eth', 'auto.eth',
                'program.eth', 'priority.eth', 'creative.eth', 'scene.eth', 'portrait.eth',
                'landscape.eth', 'sports.eth', 'night.eth', 'sunset.eth', 'sunrise.eth'
            ];
            
            let html = '';
            
            // Generate points in descending order
            const basePoints = [];
            for (let i = 0; i < 100; i++) {
                basePoints.push(75000 - (i * 500) + Math.floor(Math.random() * 400));
            }
            
            for (let i = 0; i < 100; i++) {
                const rank = i + 1;
                const username = usernames[i % usernames.length];
                const points = basePoints[i];
                
                let rankClass = 'regular';
                let usernameClass = '';
                let itemClass = '';
                let pointsClass = '';
                
                if (rank === 1) {
                    rankClass = 'first';
                    usernameClass = 'first';
                    itemClass = 'first';
                    pointsClass = 'first';
                } else if (rank === 2) {
                    rankClass = 'second';
                    usernameClass = 'second';
                    itemClass = 'second';
                    pointsClass = 'second';
                } else if (rank === 3) {
                    rankClass = 'third';
                    usernameClass = 'third';
                    itemClass = 'third';
                    pointsClass = 'third';
                }
                
                html += `
                    <div class="leaderboard-item ${itemClass}">
                        <div class="rank-sticker ${rankClass}">
                            <span>${rank}</span>
                        </div>
                        <div class="user-info">
                            <div class="username ${usernameClass}">${username}</div>
                            <div class="points ${pointsClass}">
                                <span class="points-gem"></span>
                                ${points.toLocaleString()} points
                            </div>
                        </div>
                    </div>
                `;
            }
            
            leaderboardList.innerHTML = html;
        }
        
        // Dynamic slogan animation
        function animateSlogan() {
            const slogans = [
                "Capture the moment through your $LENS!",
                "Discover new worlds with $LENS.",
                "Focus your vision through $LENS!",
                "Memories are sharper with $LENS.",
                "Tell your story through $LENS!",
                "See beauty unfold with $LENS.",
                "Frame your future through $LENS!",
                "Creativity comes alive in $LENS.",
                "Unlock perspectives with $LENS!",
                "Emotions come into focus with $LENS.",
                "Explore hidden details through $LENS!",
                "The world looks brighter with $LENS.",
                "Life is sharper when seen through $LENS!",
                "Capture light, capture life with $LENS.",
                "Your vision, your story, your $LENS!",
                "Find clarity in every shot with $LENS.",
                "The magic of moments lives in $LENS!",
                "Focus on what matters through $LENS.",
                "Every frame finds meaning in $LENS!",
                "See the extraordinary through $LENS."
            ];
            
            const sloganElement = document.getElementById('dynamicSlogan');
            let currentIndex = 0;
            
            function showNextSlogan() {
                const slogan = slogans[currentIndex];
                const words = slogan.split(' ');
                
                // Clear current content
                sloganElement.innerHTML = '';
                
                // Add each word with animation delay
                words.forEach((word, index) => {
                    const span = document.createElement('span');
                    span.className = 'slogan-word';
                    span.textContent = word + (index < words.length - 1 ? ' ' : '');
                    span.style.animationDelay = `${index * 0.1}s`;
                    sloganElement.appendChild(span);
                });
                
                currentIndex = (currentIndex + 1) % slogans.length;
            }
            
            // Show first slogan immediately
            showNextSlogan();
            
            // Change slogan every 4 seconds
            setInterval(showNextSlogan, 4000);
        }
        
        // Camera functionality
        let currentStream = null;
        let currentCamera = 'environment'; // 'user' for front, 'environment' for back
        let flashMode = 'off';
        let gridMode = 'off';
        let timerMode = 'off';
        let aspectRatio = 'full';
        let currentZoom = 1;
        let isUltraWideSupported = false;
        let isGalleryImage = false;
        
        function openCamera() {
            const cameraScreen = document.getElementById('cameraScreen');
            cameraScreen.classList.add('show');
            startCamera();
        }
        
        function closeCamera() {
            const cameraScreen = document.getElementById('cameraScreen');
            cameraScreen.classList.remove('show');
            stopCamera();
        }
        
        async function checkUltraWideSupport() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                const videoDevices = devices.filter(device => device.kind === 'videoinput');
                
                console.log('Available video devices:', videoDevices.map(d => d.label));
                
                // Check for ultra-wide camera indicators
                const hasUltraWide = videoDevices.some(device => {
                    const label = device.label.toLowerCase();
                    return label.includes('ultra') || 
                           label.includes('wide') || 
                           label.includes('0.5') ||
                           label.includes('0.6') ||
                           label.includes('back') && (label.includes('2') || label.includes('wide'));
                });
                
                // iOS typically has ultra-wide, Android support varies
                const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
                const isAndroid = /Android/.test(navigator.userAgent);
                
                // For iOS: assume ultra-wide if 3+ cameras, for Android: rely on device labels
                if (isIOS) {
                    isUltraWideSupported = videoDevices.length >= 3;
                } else if (isAndroid) {
                    // Android: be more aggressive in detection
                    isUltraWideSupported = hasUltraWide || videoDevices.length >= 3;
                } else {
                    isUltraWideSupported = hasUltraWide;
                }
                
                console.log('Ultra-wide supported:', isUltraWideSupported, 'Device count:', videoDevices.length);
                return isUltraWideSupported;
            } catch (error) {
                console.error('Error checking camera devices:', error);
                isUltraWideSupported = false;
                return false;
            }
        }

        async function startCamera() {
            try {
                let constraints = {
                    video: {
                        facingMode: currentCamera,
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    }
                };
                
                currentStream = await navigator.mediaDevices.getUserMedia(constraints);
                const video = document.getElementById('cameraVideo');
                video.srcObject = currentStream;
                
                // Update video class based on camera
                video.className = currentCamera === 'environment' ? 'camera-video back-camera' : 'camera-video';
                
                // Apply zoom transform
                video.style.transform = currentCamera === 'user' ? 
                    `scaleX(-1) scale(${currentZoom})` : 
                    `scale(${currentZoom})`;
                
                // Update zoom controls visibility based on camera
                updateZoomControls();
                
                document.getElementById('cameraError').style.display = 'none';
            } catch (error) {
                console.error('Error accessing camera:', error);
                document.getElementById('cameraError').style.display = 'block';
            }
        }
        
        function stopCamera() {
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
                currentStream = null;
            }
        }
        
        function updateZoomControls() {
            const zoomControls = document.getElementById('zoomControls');
            
            if (currentCamera === 'user') {
                // Front camera: only 1x zoom
                zoomControls.innerHTML = '<button class="zoom-btn active" onclick="setZoom(1)">1x</button>';
            } else {
                // Back camera: 0.5x, 1x, 2x zoom - always show 0.5x regardless of device
                zoomControls.innerHTML = `
                    <button class="zoom-btn ${currentZoom === 0.5 ? 'active' : ''}" onclick="setZoom(0.5)">0.5x</button>
                    <button class="zoom-btn ${currentZoom === 1 ? 'active' : ''}" onclick="setZoom(1)">1x</button>
                    <button class="zoom-btn ${currentZoom === 2 ? 'active' : ''}" onclick="setZoom(2)">2x</button>
                `;
            }
        }
        
        async function switchCamera() {
            currentCamera = currentCamera === 'user' ? 'environment' : 'user';
            // Reset zoom to 1x when switching cameras
            currentZoom = 1;
            stopCamera();
            await startCamera();
        }
        
        async function toggleFlash() {
            const flashBtn = document.getElementById('flashBtn');
            const flashIcon = document.getElementById('flashIcon');
            
            try {
                if (flashMode === 'off') {
                    // Try to enable flash/torch
                    if (currentStream) {
                        const track = currentStream.getVideoTracks()[0];
                        const capabilities = track.getCapabilities();
                        
                        if (capabilities.torch) {
                            await track.applyConstraints({
                                advanced: [{ torch: true }]
                            });
                            flashMode = 'on';
                            flashBtn.classList.add('active');
                            flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" fill="currentColor"/>';
                        } else {
                            // Fallback: simulate flash with screen flash
                            flashMode = 'screen';
                            flashBtn.classList.add('active');
                            flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" fill="currentColor"/>';
                        }
                    }
                } else {
                    // Turn off flash
                    if (currentStream && flashMode === 'on') {
                        const track = currentStream.getVideoTracks()[0];
                        await track.applyConstraints({
                            advanced: [{ torch: false }]
                        });
                    }
                    flashMode = 'off';
                    flashBtn.classList.remove('active');
                    flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>';
                }
            } catch (error) {
                console.log('Flash not supported on this device:', error);
                // Fallback to screen flash mode
                if (flashMode === 'off') {
                    flashMode = 'screen';
                    flashBtn.classList.add('active');
                    flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" fill="currentColor"/>';
                } else {
                    flashMode = 'off';
                    flashBtn.classList.remove('active');
                    flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>';
                }
            }
        }
        
        function toggleGrid() {
            const gridBtn = document.getElementById('gridBtn');
            const gridOverlay = document.getElementById('gridOverlay');
            
            if (gridMode === 'off') {
                gridMode = '3x3';
                gridBtn.classList.add('active');
                gridOverlay.className = 'grid-overlay grid-3x3 active';
            } else if (gridMode === '3x3') {
                gridMode = 'symmetrical';
                gridOverlay.className = 'grid-overlay grid-symmetrical active';
            } else {
                gridMode = 'off';
                gridBtn.classList.remove('active');
                gridOverlay.className = 'grid-overlay';
            }
            
            // Update grid to match current aspect ratio
            updateGridForAspectRatio();
        }
        
        function updateGridForAspectRatio() {
            const gridOverlay = document.getElementById('gridOverlay');
            
            if (gridMode === 'off') return;
            
            // Remove existing aspect ratio classes
            gridOverlay.classList.remove('grid-full', 'grid-1-1', 'grid-3-4');
            
            // Add aspect ratio specific class
            if (aspectRatio === 'full') {
                gridOverlay.classList.add('grid-full');
            } else if (aspectRatio === '1:1') {
                gridOverlay.classList.add('grid-1-1');
            } else if (aspectRatio === '3:4') {
                gridOverlay.classList.add('grid-3-4');
            }
        }
        
        function toggleTimer() {
            const timerBtn = document.getElementById('timerBtn');
            
            if (timerMode === 'off') {
                timerMode = '3s';
                timerBtn.classList.add('active');
                timerBtn.innerHTML = '<span style="font-size: 10px; font-weight: 700;">3s</span>';
            } else if (timerMode === '3s') {
                timerMode = '5s';
                timerBtn.innerHTML = '<span style="font-size: 10px; font-weight: 700;">5s</span>';
            } else if (timerMode === '5s') {
                timerMode = '10s';
                timerBtn.innerHTML = '<span style="font-size: 9px; font-weight: 700;">10s</span>';
            } else {
                timerMode = 'off';
                timerBtn.classList.remove('active');
                timerBtn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>';
            }
        }
        
        function toggleAspectRatio() {
            const aspectBtn = document.getElementById('aspectBtn');
            const aspectOverlay = document.getElementById('aspectOverlay');
            const gridOverlay = document.getElementById('gridOverlay');
            
            if (aspectRatio === 'full') {
                aspectRatio = '1:1';
                aspectBtn.innerHTML = '<span style="font-size: 9px; font-weight: 700;">1:1</span>';
                aspectOverlay.className = 'aspect-ratio-overlay ratio-1-1';
            } else if (aspectRatio === '1:1') {
                aspectRatio = '3:4';
                aspectBtn.innerHTML = '<span style="font-size: 9px; font-weight: 700;">3:4</span>';
                aspectOverlay.className = 'aspect-ratio-overlay ratio-3-4';
            } else {
                aspectRatio = 'full';
                aspectBtn.innerHTML = '<span style="font-size: 9px; font-weight: 700;">Full</span>';
                aspectOverlay.className = 'aspect-ratio-overlay';
            }
            
            // Update grid overlay to match aspect ratio
            updateGridForAspectRatio();
        }
        
        async function setZoom(zoom) {
            // Don't allow zoom changes on front camera except 1x
            if (currentCamera === 'user' && zoom !== 1) {
                return;
            }
            
            currentZoom = zoom;
            
            // Update active zoom button
            document.querySelectorAll('.zoom-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Apply zoom transform
            const video = document.getElementById('cameraVideo');
            video.style.transform = currentCamera === 'user' ? 
                `scaleX(-1) scale(${zoom})` : 
                `scale(${zoom})`;
        }
        
        async function capturePhoto() {
            if (timerMode !== 'off') {
                await startTimer();
            }
            
            // Trigger flash effect if enabled
            if (flashMode === 'screen' || flashMode === 'on') {
                await triggerFlashEffect();
            }
            
            const video = document.getElementById('cameraVideo');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Get original video dimensions
            const videoWidth = video.videoWidth;
            const videoHeight = video.videoHeight;
            
            // Calculate crop dimensions based on aspect ratio
            let cropWidth = videoWidth;
            let cropHeight = videoHeight;
            let cropX = 0;
            let cropY = 0;
            
            if (aspectRatio === '1:1') {
                // Crop to square 1:1 aspect ratio
                const minDimension = Math.min(videoWidth, videoHeight);
                cropWidth = minDimension;
                cropHeight = minDimension;
                cropX = (videoWidth - cropWidth) / 2;
                cropY = (videoHeight - cropHeight) / 2;
            } else if (aspectRatio === '3:4') {
                // Crop to 3:4 portrait aspect ratio (crop from top/bottom)
                const targetHeight = videoWidth * 4 / 3;
                if (targetHeight <= videoHeight) {
                    cropHeight = targetHeight;
                    cropY = (videoHeight - cropHeight) / 2;
                } else {
                    cropWidth = videoHeight * 3 / 4;
                    cropX = (videoWidth - cropWidth) / 2;
                }
            }
            // For 'full' aspect ratio, use original dimensions (no cropping)
            
            // Set canvas size to cropped dimensions
            canvas.width = cropWidth;
            canvas.height = cropHeight;
            
            // Draw cropped video frame to canvas
            ctx.drawImage(video, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);
            
            // Convert to blob and show preview
            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                showPhotoPreview(url, false); // false = from camera
            }, 'image/jpeg', 0.9);
        }
        
        function startTimer() {
            return new Promise(resolve => {
                const timerDisplay = document.getElementById('timerDisplay');
                const duration = timerMode === '3s' ? 3 : timerMode === '5s' ? 5 : 10;
                let count = duration;
                
                timerDisplay.textContent = count;
                timerDisplay.style.display = 'block';
                
                const interval = setInterval(() => {
                    count--;
                    timerDisplay.textContent = count;
                    
                    if (count <= 0) {
                        clearInterval(interval);
                        timerDisplay.style.display = 'none';
                        resolve();
                    }
                }, 1000);
            });
        }
        
        function showPhotoPreview(imageUrl, fromGallery = false) {
            const preview = document.getElementById('photoPreview');
            const previewImage = document.getElementById('previewImage');
            const previewActions = document.getElementById('previewActions');
            
            previewImage.src = imageUrl;
            isGalleryImage = fromGallery;
            
            // Update preview actions based on source
            if (fromGallery) {
                // For gallery images: only Share on Farcaster and Mint (coming soon) - centered in grid
                previewActions.innerHTML = `
                    <button class="preview-btn primary" onclick="shareOnFarcaster()">
                        <img src="https://github.com/vrypan/farcaster-brand/raw/main/icons/icon-rounded/purple-white.png" 
                             alt="Farcaster" 
                             width="16" 
                             height="16" 
                             style="border-radius: 3px;"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        <span>Share</span>
                    </button>
                    <button class="preview-btn disabled" onclick="mintToLens()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 12l2 2 4-4"/>
                        </svg>
                        <span>Mint</span>
                    </button>
                `;
            } else {
                // For camera photos: all 4 options in 2x2 grid
                previewActions.innerHTML = `
                    <button class="preview-btn primary" onclick="shareOnFarcaster()">
                        <img src="https://github.com/vrypan/farcaster-brand/raw/main/icons/icon-rounded/purple-white.png" 
                             alt="Farcaster" 
                             width="16" 
                             height="16" 
                             style="border-radius: 3px;"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        <span>Share</span>
                    </button>
                    <button class="preview-btn disabled" onclick="mintToLens()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 12l2 2 4-4"/>
                        </svg>
                        <span>Mint</span>
                    </button>
                    <button class="preview-btn secondary" onclick="retakePhoto()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 4v6h6"/>
                            <path d="M23 20v-6h-6"/>
                            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                        </svg>
                        <span>Retake</span>
                    </button>
                    <button class="preview-btn success" onclick="saveToGallery()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17,21 17,13 7,13 7,21"/>
                            <polyline points="7,3 7,8 15,8"/>
                        </svg>
                        <span>Save</span>
                    </button>
                `;
            }
            
            preview.classList.add('show');
        }
        
        function retakePhoto() {
            const preview = document.getElementById('photoPreview');
            preview.classList.remove('show');
            isGalleryImage = false;
        }
        
        function shareOnFarcaster() {
            // Simulate sharing to Farcaster
            alert('Photo shared to Farcaster! 📸\n\nYou earned 25 $LENS tokens for sharing your photo with the community.');
            retakePhoto();
        }
        
        function saveToGallery() {
            // Simulate saving to gallery
            alert('Photo saved to your LENS Gallery! 💾\n\nYou can view it in the Gallery section.');
            retakePhoto();
        }
        
        function mintToLens() {
            // This feature is disabled in the demo
            alert('NFT minting feature coming soon! 🎨\n\nThis will allow you to mint your photos as NFTs on the blockchain.');
        }
        

        
        function triggerFlashEffect() {
            return new Promise(resolve => {
                // Create flash overlay
                const flashOverlay = document.createElement('div');
                flashOverlay.style.position = 'absolute';
                flashOverlay.style.top = '0';
                flashOverlay.style.left = '0';
                flashOverlay.style.width = '100%';
                flashOverlay.style.height = '100%';
                flashOverlay.style.backgroundColor = 'white';
                flashOverlay.style.opacity = '0';
                flashOverlay.style.zIndex = '100';
                flashOverlay.style.pointerEvents = 'none';
                flashOverlay.style.transition = 'opacity 0.1s ease';
                
                const cameraScreen = document.getElementById('cameraScreen');
                cameraScreen.appendChild(flashOverlay);
                
                // Trigger flash animation
                setTimeout(() => {
                    flashOverlay.style.opacity = '0.8';
                }, 10);
                
                setTimeout(() => {
                    flashOverlay.style.opacity = '0';
                }, 150);
                
                setTimeout(() => {
                    cameraScreen.removeChild(flashOverlay);
                    resolve();
                }, 250);
            });
        }
        
        function selectFromGallery() {
            // Create hidden file input
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'image/*';
            fileInput.style.display = 'none';
            
            fileInput.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    // Validate file type
                    if (!file.type.startsWith('image/')) {
                        alert('Please select a valid image file.');
                        return;
                    }
                    
                    // Validate file size (max 10MB)
                    if (file.size > 10 * 1024 * 1024) {
                        alert('Image file is too large. Please select an image smaller than 10MB.');
                        return;
                    }
                    
                    // Create URL for the selected image
                    const imageUrl = URL.createObjectURL(file);
                    
                    // Show photo preview with the selected image
                    showPhotoPreview(imageUrl, true); // true = from gallery
                }
                
                // Clean up
                document.body.removeChild(fileInput);
            };
            
            // Trigger file selection
            document.body.appendChild(fileInput);
            fileInput.click();
        }
        
        function requestCameraPermission() {
            startCamera();
        }
        
        // Spotlight Spots Management
        let spotlightSpots = {};
        let currentSpotlightSpot = null;
        let usedCastUrls = new Set(); // Track used cast URLs across all spots
        
        function handleSpotlightClick(spotNumber) {
            const spot = spotlightSpots[spotNumber];
            
            if (!spot || !spot.isOwned) {
                // Spot is available for purchase
                currentSpotlightSpot = spotNumber;
                openSpotlightModal();
            } else if (spot.isOwned && spot.owner !== 'photographer.eth') {
                // Spot is owned by someone else - redirect to their cast
                visitSpotlightCast(spotNumber);
            } else if (spot.isOwned && spot.owner === 'photographer.eth') {
                // User owns this spot - redirect to their promoted cast
                visitSpotlightCast(spotNumber);
            }
        }
        
        function openSpotlightModal() {
            const modal = document.getElementById('spotlightModal');
            modal.classList.add('show');
        }
        
        function closeSpotlightModal() {
            const modal = document.getElementById('spotlightModal');
            const castUrlInput = document.getElementById('castUrlInput');
            modal.classList.remove('show');
            castUrlInput.value = ''; // Clear input
            currentSpotlightSpot = null;
        }
        
        function buySpotlightSpot() {
            if (!currentSpotlightSpot) return;
            
            const castUrlInput = document.getElementById('castUrlInput');
            const castUrl = castUrlInput.value.trim();
            
            // Validate cast URL
            if (!castUrl) {
                alert('Please enter your Farcaster cast URL to promote.');
                castUrlInput.focus();
                return;
            }
            
            // Basic URL validation
            if (!castUrl.startsWith('https://farcaster.xyz/') && !castUrl.startsWith('https://warpcast.com/')) {
                alert('Please enter a valid Farcaster cast URL.\n\nExample: https://farcaster.xyz/username/0x123...');
                castUrlInput.focus();
                return;
            }
            
            // Check if cast URL is already used in any active spot
            if (usedCastUrls.has(castUrl)) {
                alert('⚠️ This cast has an active spotlight!\n\nThis cast is already being promoted in another spotlight spot. Each cast can only have one active spotlight at a time.\n\nPlease use a different cast or wait for the current spotlight to expire.');
                castUrlInput.focus();
                return;
            }
            
            // Simulate transaction
            const spotNumber = currentSpotlightSpot;
            const expiresAt = Date.now() + (6 * 60 * 60 * 1000); // 6 hours from now
            
            // Update spot data
            spotlightSpots[spotNumber] = {
                isOwned: true,
                owner: 'photographer.eth',
                expiresAt: expiresAt,
                castUrl: castUrl
            };
            
            // Add cast URL to used set
            usedCastUrls.add(castUrl);
            
            // Update UI
            updateSpotlightSpotUI(spotNumber);
            
            // Start timer
            startSpotlightTimer(spotNumber);
            
            // Close modal and show success
            closeSpotlightModal();
            alert(`🎉 Spotlight Spot #${spotNumber} purchased successfully!\n\nYour cast will be promoted for 6 hours.\nOthers can now click on this spot to visit your cast and earn points!`);
        }
        
        async function updateSpotlightSpotUI(spotNumber) {
            const spotElement = document.getElementById(`spotlight-${spotNumber}`);
            const spot = spotlightSpots[spotNumber];
            
            if (spot && spot.isOwned) {
                // Extract image from cast URL
                const castImageUrl = await extractCastImage(spot.castUrl);
                
                if (spot.owner === 'photographer.eth') {
                    // User owns this spot
                    spotElement.classList.remove('spotlight-available', 'spotlight-locked');
                    spotElement.classList.add('spotlight-owned');
                    
                    if (castImageUrl) {
                        spotElement.innerHTML = `
                            <img src="${castImageUrl}" 
                                 alt="Your promoted cast" 
                                 style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="gallery-placeholder" style="display: none;">Your Spot<br>#${spotNumber}</div>
                            <div class="spotlight-timer" id="timer-${spotNumber}"></div>
                        `;
                    } else {
                        spotElement.innerHTML = `
                            <div class="gallery-placeholder">Your Spot<br>#${spotNumber}</div>
                            <div class="spotlight-timer" id="timer-${spotNumber}"></div>
                        `;
                    }
                } else {
                    // Someone else owns this spot
                    spotElement.classList.remove('spotlight-owned', 'spotlight-available');
                    spotElement.classList.add('spotlight-locked');
                    
                    if (castImageUrl) {
                        spotElement.innerHTML = `
                            <img src="${castImageUrl}" 
                                 alt="@${spot.owner.split('.')[0]}'s cast" 
                                 style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="gallery-placeholder" style="display: none;">@${spot.owner.split('.')[0]}<br>Spot #${spotNumber}</div>
                            <div class="spotlight-timer" id="timer-${spotNumber}"></div>
                        `;
                    } else {
                        spotElement.innerHTML = `
                            <div class="gallery-placeholder">@${spot.owner.split('.')[0]}<br>Spot #${spotNumber}</div>
                            <div class="spotlight-timer" id="timer-${spotNumber}"></div>
                        `;
                    }
                }
            } else {
                // Spot is available
                spotElement.classList.remove('spotlight-owned', 'spotlight-locked');
                spotElement.classList.add('spotlight-available');
                spotElement.innerHTML = `<div class="gallery-placeholder">Available<br>Spot #${spotNumber}</div>`;
            }
        }
        
        function startSpotlightTimer(spotNumber) {
            const spot = spotlightSpots[spotNumber];
            if (!spot) return;
            
            const updateTimer = () => {
                const timerElement = document.getElementById(`timer-${spotNumber}`);
                if (!timerElement) return;
                
                const now = Date.now();
                const remaining = spot.expiresAt - now;
                
                if (remaining <= 0) {
                    // Spot expired - clean up
                    const expiredSpot = spotlightSpots[spotNumber];
                    if (expiredSpot && expiredSpot.castUrl) {
                        usedCastUrls.delete(expiredSpot.castUrl); // Remove from used URLs
                    }
                    delete spotlightSpots[spotNumber];
                    updateSpotlightSpotUI(spotNumber);
                    return;
                }
                
                timerElement.textContent = formatTimeRemaining(spot.expiresAt);
            };
            
            // Update immediately to show timer right away
            setTimeout(updateTimer, 100); // Small delay to ensure DOM is ready
            
            // Then update every minute
            const interval = setInterval(() => {
                updateTimer();
                if (!spotlightSpots[spotNumber]) {
                    clearInterval(interval);
                }
            }, 60000); // Update every minute
        }
        
        function formatTimeRemaining(expiresAt) {
            const now = Date.now();
            const remaining = expiresAt - now;
            
            if (remaining <= 0) return '0h 0m';
            
            const hours = Math.floor(remaining / (1000 * 60 * 60));
            const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
            
            return `${hours}h ${minutes}m`;
        }
        
        async function extractCastImage(castUrl) {
            if (!castUrl) return null;
            
            try {
                // For demo purposes, we'll simulate extracting images from different cast URLs
                // In a real implementation, you would:
                // 1. Parse the cast URL to get the cast hash
                // 2. Use Farcaster Hub API or Neynar API to fetch cast data
                // 3. Extract the first image from the cast's embeds or attachments
                
                // Demo image extraction based on URL patterns - each user gets a unique image
                const imageMap = {
                    'artlens.eth': 'https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3',
                    'streetphoto.eth': 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=400&fit=crop',
                    'blackwhite.eth': 'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=400&fit=crop',
                    'urbanshot.eth': 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=400&h=400&fit=crop',
                    'nightcrawler.eth': 'https://images.unsplash.com/photo-1514539079130-25950c84af65?w=400&h=400&fit=crop',
                    'photographer.eth': 'https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3',
                    'nimaleophotos.eth': 'https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3'
                };
                
                // Find matching user in the cast URL
                for (const [user, imageUrl] of Object.entries(imageMap)) {
                    if (castUrl.includes(user)) {
                        return imageUrl;
                    }
                }
                
                // In a real implementation, this would be:
                /*
                const castHash = extractCastHashFromUrl(castUrl);
                const response = await fetch(`https://api.neynar.com/v2/farcaster/cast?identifier=${castHash}`, {
                    headers: {
                        'api_key': 'YOUR_NEYNAR_API_KEY'
                    }
                });
                const castData = await response.json();
                
                // Extract first image from embeds
                if (castData.cast && castData.cast.embeds && castData.cast.embeds.length > 0) {
                    for (const embed of castData.cast.embeds) {
                        if (embed.url && (embed.url.includes('.jpg') || embed.url.includes('.png') || embed.url.includes('.gif'))) {
                            return embed.url;
                        }
                    }
                }
                */
                
                return null;
            } catch (error) {
                console.error('Error extracting cast image:', error);
                return null;
            }
        }
        
        function extractCastHashFromUrl(castUrl) {
            // Extract cast hash from Farcaster URLs
            // Format: https://farcaster.xyz/username/0x123abc...
            // or: https://warpcast.com/username/0x123abc...
            const match = castUrl.match(/\/(0x[a-fA-F0-9]+)$/);
            return match ? match[1] : null;
        }
        
        function visitSpotlightCast(spotNumber) {
            const spot = spotlightSpots[spotNumber];
            if (!spot || !spot.castUrl) return;
            
            // Simulate visiting the cast and earning points
            alert(`🎯 Visiting @${spot.owner.split('.')[0]}'s cast!\n\n+50 $LENS points earned for engaging with spotlight content!\n\nRedirecting to their cast...`);
            
            // In a real app, this would redirect to the actual cast
            setTimeout(() => {
                window.open(spot.castUrl, '_blank');
            }, 1000);
        }
        
        // Initialize some demo spotlight spots
        function initializeDemoSpotlights() {
            // Initialize all spots as available first
            for (let i = 1; i <= 9; i++) {
                updateSpotlightSpotUI(i);
            }
            
            // Demo cast URLs for different users
            const demoCastUrls = [
                'https://farcaster.xyz/artlens.eth/0x789abc123',
                'https://farcaster.xyz/streetphoto.eth/0x456def789',
                'https://farcaster.xyz/blackwhite.eth/0x123ghi456',
                'https://farcaster.xyz/urbanshot.eth/0x789jkl012',
                'https://farcaster.xyz/nightcrawler.eth/0x345mno678'
            ];
            
            const demoUsers = [
                'artlens.eth',
                'streetphoto.eth', 
                'blackwhite.eth',
                'urbanshot.eth',
                'nightcrawler.eth'
            ];
            
            // Create some demo occupied spots with different expiration times
            const demoSpots = [
                { spot: 2, user: 0, hoursRemaining: 5.5 },
                { spot: 3, user: 1, hoursRemaining: 4.2 },
                { spot: 6, user: 2, hoursRemaining: 2.8 },
                { spot: 8, user: 3, hoursRemaining: 1.5 }
            ];
            
            demoSpots.forEach(({ spot, user, hoursRemaining }) => {
                const expiresAt = Date.now() + (hoursRemaining * 60 * 60 * 1000);
                const castUrl = demoCastUrls[user];
                
                spotlightSpots[spot] = {
                    isOwned: true,
                    owner: demoUsers[user],
                    expiresAt: expiresAt,
                    castUrl: castUrl
                };
                
                // Add to used URLs
                usedCastUrls.add(castUrl);
                
                updateSpotlightSpotUI(spot);
                startSpotlightTimer(spot);
            });
        }
        
        function openFeaturedPhoto(spotNumber) {
            // This function is now replaced by handleSpotlightClick
            handleSpotlightClick(spotNumber);
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            generateLeaderboard();
            animateSlogan();
            initializeDemoSpotlights();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'978aca65d20166cf',t:'MTc1Njc5Mjg2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
