<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LENS APP - Photography Farcaster Mini-App</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: #0a0a0a;
        color: #e8e9ea;
        overflow: hidden;
        position: relative;
        transition: all 0.3s ease;
      }

      body.light-theme {
        background: #f8f9fa;
        color: #1a1a1a;
      }

      .app-container {
        width: 392px;
        height: 695px;
        margin: 0 auto;
        position: relative;
        background: #1a1a1a;
        transition: all 0.3s ease;
      }

      body.light-theme .app-container {
        background: #ffffff;
      }

      /* Animated Background */
      .bg-animation {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        z-index: 0;
      }

      .lens-flare {
        position: absolute;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: float 6s ease-in-out infinite;
      }

      .lens-flare:nth-child(1) {
        top: 20%;
        left: 10%;
        animation-delay: 0s;
      }

      .lens-flare:nth-child(2) {
        top: 60%;
        right: 15%;
        animation-delay: 2s;
      }

      .lens-flare:nth-child(3) {
        bottom: 30%;
        left: 30%;
        animation-delay: 4s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) scale(1);
          opacity: 0.3;
        }
        50% {
          transform: translateY(-15px) scale(1.1);
          opacity: 0.1;
        }
      }

      /* Main Content */
      .content {
        position: relative;
        z-index: 10;
        height: 100%;
        display: flex;
        flex-direction: column;
        padding: 15px;
      }

      /* Header */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        height: 32px;
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
      }

      .lens-logo {
        width: 32px;
        height: 32px;
        border: 2px solid #fff;
        border-radius: 50%;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        flex-shrink: 0;
      }

      body.light-theme .lens-logo {
        border-color: #2c2c2c;
      }

      .lens-logo::before {
        content: "";
        width: 16px;
        height: 16px;
        border: 1.5px solid #fff;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      body.light-theme .lens-logo::before {
        border-color: #2c2c2c;
      }

      .app-title {
        font-size: 20px;
        font-weight: 800;
        letter-spacing: 1.5px;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      body.light-theme .app-title {
        color: #2c2c2c;
      }

      .header-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }

      .theme-toggle {
        width: 32px;
        height: 32px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
      }

      body.light-theme .theme-toggle {
        background: rgba(44, 44, 44, 0.1);
        border-color: rgba(44, 44, 44, 0.3);
        color: #2c2c2c;
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      body.light-theme .theme-toggle:hover {
        background: rgba(44, 44, 44, 0.2);
      }

      .connect-wallet {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        font-size: 12px;
        white-space: nowrap;
        height: 32px;
        display: flex;
        align-items: center;
      }

      body.light-theme .connect-wallet {
        background: rgba(44, 44, 44, 0.1);
        border-color: rgba(44, 44, 44, 0.3);
        color: #2c2c2c;
      }

      .connect-wallet:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      body.light-theme .connect-wallet:hover {
        background: rgba(44, 44, 44, 0.2);
      }

      /* Daily Slogan */
      .daily-slogan {
        margin-bottom: 15px;
        width: 100%;
      }

      .slogan-text {
        font-size: 12px;
        font-weight: 400;
        color: #b8bcc8;
        margin: 0;
        transition: all 0.3s ease;
        opacity: 1;
        min-height: 16px;
        display: flex;
        flex-wrap: nowrap;
        gap: 3px;
        white-space: nowrap;
        overflow: hidden;
        width: 100%;
      }

      body.light-theme .slogan-text {
        color: #495057;
      }

      .slogan-word {
        opacity: 0;
        transform: translateX(-8px);
        animation: wordAppear 0.5s ease forwards;
        display: inline-block;
      }

      @keyframes wordAppear {
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Tabs */
      .tabs-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        margin: 2px 0 0 0;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 12px 12px 0 0;
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-bottom: none;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      body.light-theme .tabs-container {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.08);
      }

      .tab-buttons {
        display: flex;
        background: rgba(255, 255, 255, 0.05);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      body.light-theme .tab-buttons {
        background: rgba(0, 0, 0, 0.03);
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .tab-button {
        padding: 10px 8px;
        background: rgba(255, 255, 255, 0.05);
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 800;
        text-align: center;
        border-bottom: 2px solid transparent;
        position: relative;
        font-size: 12px;
      }

      body.light-theme .tab-button {
        background: rgba(0, 0, 0, 0.03);
        color: rgba(44, 44, 44, 0.8);
      }

      .tab-button:first-child {
        flex: 1;
      }

      .tab-button:nth-child(2) {
        flex: 1.8;
        font-size: 16px;
        font-weight: 700;
      }

      .tab-button:last-child {
        flex: 1;
      }

      .tab-button.active {
        color: #fff;
        background: rgba(255, 255, 255, 0.1);
        border-bottom-color: rgba(255, 255, 255, 0.6);
      }

      body.light-theme .tab-button.active {
        color: #2c2c2c;
        background: rgba(0, 0, 0, 0.08);
        border-bottom-color: rgba(44, 44, 44, 0.6);
      }

      .tab-button:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.9);
      }

      body.light-theme .tab-button:hover:not(.active) {
        background: rgba(0, 0, 0, 0.05);
        color: rgba(44, 44, 44, 0.9);
      }

      .tab-content {
        flex: 1;
        padding: 15px;
      }

      .tab-panel {
        display: none;
        height: 100%;
      }

      .tab-panel.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Bottom Navigation */
      .bottom-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 5px;
        margin-top: 0;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-top: none;
        border-radius: 0 0 12px 12px;
        padding: 12px;
        position: relative;
        transition: all 0.3s ease;
      }

      body.light-theme .bottom-nav {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.08);
      }

      .nav-button {
        flex: 1;
        padding: 8px 6px;
        background: transparent;
        border: none;
        color: #fff;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        font-size: 9px;
        font-weight: 500;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 3px;
        position: relative;
        white-space: nowrap;
      }

      body.light-theme .nav-button {
        color: #2c2c2c;
      }

      .nav-button:nth-child(1) {
        margin-left: -2px;
      }

      .nav-button:nth-child(2) {
        margin-left: 8px;
        margin-right: 8px;
      }

      .nav-button:nth-child(4) {
        margin-left: 8px;
        margin-right: 8px;
      }

      .nav-button:nth-child(5) {
        margin-right: -2px;
      }

      .nav-button:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-1px);
      }

      body.light-theme .nav-button:hover {
        background: rgba(0, 0, 0, 0.1);
      }

      .camera-button {
        width: 50px !important;
        height: 50px !important;
        border-radius: 50% !important;
        background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%) !important;
        color: #000 !important;
        font-weight: 700 !important;
        font-size: 9px !important;
        flex: none !important;
        box-shadow: 0 3px 12px rgba(255, 255, 255, 0.3) !important;
        border: 2px solid rgba(255, 255, 255, 0.8) !important;
        position: relative;
        z-index: 10;
        margin-left: -3px;
      }

      body.light-theme .camera-button {
        background: linear-gradient(
          135deg,
          #2c2c2c 0%,
          #1a1a1a 100%
        ) !important;
        color: #fff !important;
        box-shadow: 0 3px 12px rgba(44, 44, 44, 0.3) !important;
        border: 2px solid rgba(44, 44, 44, 0.8) !important;
      }

      .camera-button:hover {
        transform: translateY(-2px) scale(1.05) !important;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.4) !important;
      }

      body.light-theme .camera-button:hover {
        box-shadow: 0 4px 15px rgba(44, 44, 44, 0.4) !important;
      }

      .nav-icon {
        width: 16px;
        height: 16px;
        margin-bottom: 1px;
      }

      .camera-button .nav-icon {
        width: 20px;
        height: 20px;
        margin-bottom: 2px;
      }

      /* Full Page Screens */
      .page-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1a1a1a;
        z-index: 1000;
        display: none;
        flex-direction: column;
        padding: 15px;
        overflow-y: auto;
        transition: all 0.3s ease;
      }

      body.light-theme .page-screen {
        background: #ffffff;
      }

      .page-screen.show {
        display: flex;
        animation: slideInFromRight 0.4s ease;
      }

      @keyframes slideInFromRight {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .page-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
      }

      body.light-theme .page-header {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .back-button {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        padding: 8px 12px;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        font-size: 12px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      body.light-theme .back-button {
        background: rgba(44, 44, 44, 0.1);
        border-color: rgba(44, 44, 44, 0.3);
        color: #2c2c2c;
      }

      .back-button:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      body.light-theme .back-button:hover {
        background: rgba(44, 44, 44, 0.2);
      }

      .page-title {
        font-size: 20px;
        font-weight: 700;
        color: #fff;
        text-align: center;
        flex: 1;
        transition: all 0.3s ease;
      }

      body.light-theme .page-title {
        color: #2c2c2c;
      }

      .page-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .info-section {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        padding: 18px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        transition: all 0.3s ease;
      }

      body.light-theme .info-section {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.08);
      }

      .info-section h3 {
        font-size: 16px;
        font-weight: 600;
        color: #e8e9ea;
        margin-bottom: 10px;
        transition: all 0.3s ease;
      }

      body.light-theme .info-section h3 {
        color: #1a1a1a;
      }

      .info-section p {
        font-size: 12px;
        color: #b8bcc8;
        line-height: 1.5;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      body.light-theme .info-section p {
        color: #495057;
      }

      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
      }

      .feature-card {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 10px;
        padding: 15px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        transition: all 0.3s ease;
        cursor: pointer;
      }

      body.light-theme .feature-card {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.08);
      }

      .feature-card:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-3px);
      }

      body.light-theme .feature-card:hover {
        background: rgba(0, 0, 0, 0.06);
        border-color: rgba(0, 0, 0, 0.15);
      }

      .feature-card h4 {
        font-size: 13px;
        font-weight: 600;
        color: #e8e9ea;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      body.light-theme .feature-card h4 {
        color: #1a1a1a;
      }

      .feature-card p {
        font-size: 11px;
        color: #b8bcc8;
        line-height: 1.4;
        transition: all 0.3s ease;
      }

      body.light-theme .feature-card p {
        color: #495057;
      }

      .competition-item {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 15px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 12px;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      body.light-theme .competition-item {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.08);
      }

      .competition-item:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
      }

      body.light-theme .competition-item:hover {
        background: rgba(0, 0, 0, 0.06);
        border-color: rgba(0, 0, 0, 0.15);
      }

      .competition-title {
        font-size: 15px;
        font-weight: 600;
        color: #fff;
        margin-bottom: 6px;
        transition: all 0.3s ease;
      }

      body.light-theme .competition-title {
        color: #1a1a1a;
      }

      .competition-description {
        font-size: 12px;
        color: #ccc;
        line-height: 1.4;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      body.light-theme .competition-description {
        color: #495057;
      }

      .competition-prize {
        font-size: 12px;
        color: #ffd700;
        font-weight: 600;
      }

      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
        gap: 10px;
      }

      .gallery-item {
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .gallery-item:hover {
        transform: scale(1.05);
        border-color: rgba(255, 255, 255, 0.4);
      }

      .gallery-placeholder {
        color: #888;
        font-size: 9px;
        text-align: center;
      }

      .settings-group {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 15px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 15px;
      }

      .settings-group h3 {
        font-size: 14px;
        font-weight: 600;
        color: #fff;
        margin-bottom: 12px;
      }

      .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .setting-item:last-child {
        border-bottom: none;
      }

      .setting-label {
        font-size: 11px;
        color: #ccc;
      }

      .setting-toggle {
        width: 40px;
        height: 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .setting-toggle.active {
        background: #007bff;
      }

      .setting-toggle::after {
        content: "";
        position: absolute;
        top: 2px;
        left: 2px;
        width: 16px;
        height: 16px;
        background: #fff;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      .setting-toggle.active::after {
        transform: translateX(20px);
      }

      /* Leaderboard Styles */
      .leaderboard-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .leaderboard-scroll {
        flex: 1;
        overflow-y: auto;
        padding-right: 4px;
        margin-bottom: 4px;
        max-height: 320px;
        min-height: 320px;
      }

      .leaderboard-scroll::-webkit-scrollbar {
        width: 3px;
      }

      .leaderboard-scroll::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
      }

      .leaderboard-scroll::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
      }

      .leaderboard-item {
        display: flex;
        align-items: center;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        margin-bottom: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        transition: all 0.3s ease;
      }

      body.light-theme .leaderboard-item {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.15);
      }

      .leaderboard-item.first {
        background: rgba(255, 215, 0, 0.1);
        border-color: rgba(255, 215, 0, 0.3);
      }

      .leaderboard-item.second {
        background: rgba(220, 220, 220, 0.15);
        border-color: rgba(220, 220, 220, 0.4);
        border-width: 2px;
      }

      .leaderboard-item.third {
        background: rgba(205, 127, 50, 0.1);
        border-color: rgba(205, 127, 50, 0.3);
      }

      .rank-sticker {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        margin-right: 10px;
        font-size: 12px;
        font-weight: 800;
        position: relative;
      }

      .rank-sticker.first {
        background: linear-gradient(
          135deg,
          rgba(255, 215, 0, 0.8),
          rgba(255, 193, 7, 0.6)
        );
        color: #000;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
      }

      .rank-sticker.second {
        background: linear-gradient(
          135deg,
          rgba(220, 220, 220, 0.9),
          rgba(192, 192, 192, 0.8)
        );
        color: #000;
        box-shadow: 0 0 12px rgba(220, 220, 220, 0.6);
        border: 1.5px solid rgba(255, 255, 255, 0.4);
      }

      .rank-sticker.third {
        background: linear-gradient(
          135deg,
          rgba(205, 127, 50, 0.8),
          rgba(184, 115, 51, 0.6)
        );
        color: #fff;
        box-shadow: 0 0 10px rgba(205, 127, 50, 0.4);
      }

      .rank-sticker.regular {
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        font-size: 10px;
        font-weight: 600;
      }

      body.light-theme .rank-sticker.regular {
        background: rgba(0, 0, 0, 0.1);
        color: #2c2c2c;
      }

      .user-info {
        flex: 1;
      }

      .username {
        font-weight: 600;
        margin-bottom: 1px;
        font-size: 11px;
        color: #e8e9ea;
        transition: all 0.3s ease;
      }

      body.light-theme .username {
        color: #1a1a1a;
      }

      .username.first {
        font-weight: 800;
        color: #ffd700;
      }

      .username.second {
        font-weight: 800;
        color: #e8e8e8;
        text-shadow: 0 0 6px rgba(220, 220, 220, 0.5);
      }

      .username.third {
        font-weight: 800;
        color: #cd7f32;
      }

      .points {
        color: #888;
        font-size: 10px;
        transition: all 0.3s ease;
      }

      body.light-theme .points {
        color: #666;
      }

      .current-user-rank {
        background: rgba(0, 123, 255, 0.1);
        border: 2px solid rgba(0, 123, 255, 0.4);
        border-radius: 10px;
        padding: 12px;
        margin-top: 4px;
      }

      .current-user-rank .rank-sticker {
        background: linear-gradient(
          135deg,
          rgba(0, 123, 255, 0.8),
          rgba(0, 86, 179, 0.6)
        );
        color: #fff;
        box-shadow: 0 0 10px rgba(0, 123, 255, 0.4);
      }

      .current-user-rank .username {
        color: #007bff;
        font-weight: 700;
      }

      .rank-separator {
        text-align: center;
        color: #fff;
        font-size: 10px;
        margin: 4px 0 4px 0;
        position: relative;
        transition: all 0.3s ease;
      }

      body.light-theme .rank-separator {
        color: #2c2c2c;
      }

      .rank-separator::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background: rgba(255, 255, 255, 0.1);
        z-index: 1;
        transition: all 0.3s ease;
      }

      body.light-theme .rank-separator::before {
        background: rgba(0, 0, 0, 0.1);
      }

      .rank-separator span {
        background: #1a1a1a;
        padding: 0 12px;
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
      }

      body.light-theme .rank-separator span {
        background: #ffffff;
      }

      /* POD Styles */
      .pod-image {
        width: 100%;
        height: 220px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .pod-description {
        font-size: 11px;
        line-height: 1.5;
        color: #ccc;
        transition: all 0.3s ease;
      }

      body.light-theme .pod-description {
        color: #495057;
      }

      /* Learning Styles */
      .tip-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 10px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
      }

      body.light-theme .tip-card {
        background: rgba(0, 0, 0, 0.03);
        border-color: rgba(0, 0, 0, 0.15);
      }

      .tip-card:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
      }

      body.light-theme .tip-card:hover {
        background: rgba(0, 0, 0, 0.06);
        border-color: rgba(0, 0, 0, 0.25);
      }

      .tip-title {
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 12px;
        transition: all 0.3s ease;
      }

      body.light-theme .tip-title {
        color: #1a1a1a;
      }

      .tip-content {
        font-size: 10px;
        color: #ccc;
        line-height: 1.4;
        transition: all 0.3s ease;
      }

      body.light-theme .tip-content {
        color: #495057;
      }

      body.light-theme .tutorial-title {
        color: #1a1a1a !important;
      }

      body.light-theme .profile-text {
        color: #1a1a1a !important;
      }

      body.light-theme .profile-stat {
        color: #1a1a1a !important;
      }

      body.light-theme .activity-title {
        color: #1a1a1a !important;
      }

      /* Camera Styles */
      .camera-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
        z-index: 2000;
        display: none;
        flex-direction: column;
        overflow: hidden;
      }

      .camera-screen.show {
        display: flex;
      }

      .camera-viewport {
        flex: 1;
        position: relative;
        overflow: hidden;
      }

      .camera-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scaleX(-1);
      }

      .camera-video.back-camera {
        transform: scaleX(1);
      }

      .camera-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .grid-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .grid-overlay.active {
        opacity: 0.5;
      }

      .grid-3x3 {
        background-image: linear-gradient(
            to right,
            rgba(255, 255, 255, 0.6) 2px,
            transparent 2px
          ),
          linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.6) 2px,
            transparent 2px
          );
        background-size: 33.33% 33.33%;
      }

      .grid-symmetrical {
        background-image: linear-gradient(
            to right,
            rgba(255, 255, 255, 0.6) 2px,
            transparent 2px
          ),
          linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.6) 2px,
            transparent 2px
          );
        background-size: 50% 50%;
      }

      .aspect-ratio-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        transition: all 0.3s ease;
      }

      .aspect-ratio-overlay.active {
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.8) 0%,
          transparent 20%,
          transparent 80%,
          rgba(0, 0, 0, 0.8) 100%
        );
      }

      .aspect-ratio-overlay.square {
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.8) 0%,
          transparent 12.5%,
          transparent 87.5%,
          rgba(0, 0, 0, 0.8) 100%
        );
      }

      .aspect-ratio-overlay.portrait {
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.8) 0%,
          transparent 25%,
          transparent 75%,
          rgba(0, 0, 0, 0.8) 100%
        );
      }

      .camera-controls-top {
        position: absolute;
        top: 15px;
        left: 15px;
        right: 15px;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        z-index: 10;
      }

      .camera-controls-left {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .camera-controls-right {
        display: flex;
        flex-direction: column;
        gap: 12px;
        align-items: flex-end;
      }

      .camera-controls-bottom {
        position: absolute;
        bottom: 20px;
        left: 15px;
        right: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        z-index: 10;
      }

      .camera-btn {
        width: 44px;
        height: 44px;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 12px;
        font-weight: 500;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .camera-btn:hover {
        background: rgba(0, 0, 0, 0.8);
        border-color: rgba(255, 255, 255, 0.5);
        transform: scale(1.05);
      }

      .camera-btn.active {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.6);
      }

      .zoom-controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .zoom-btn {
        width: 40px;
        height: 40px;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 11px;
        font-weight: 600;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .zoom-btn.active {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.6);
      }

      .zoom-btn:hover {
        transform: scale(1.05);
      }

      .aspect-controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .aspect-btn {
        width: 40px;
        height: 40px;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 9px;
        font-weight: 600;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .aspect-btn.active {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.6);
      }

      .aspect-btn:hover {
        transform: scale(1.05);
      }

      .capture-button {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        border: 4px solid rgba(255, 255, 255, 0.6);
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        backdrop-filter: blur(10px);
      }

      .capture-button:hover {
        transform: scale(1.05);
        background: rgba(255, 255, 255, 1);
      }

      .capture-button:active {
        transform: scale(0.95);
      }

      .capture-button::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 50px;
        height: 50px;
        background: #6c9bd1;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.2s ease;
      }

      .capture-button:active::after {
        width: 40px;
        height: 40px;
      }

      .timer-display {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 72px;
        font-weight: 800;
        color: #fff;
        text-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
        z-index: 100;
        display: none;
      }

      .photo-preview {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 20;
      }

      .photo-preview.show {
        display: flex;
      }

      .preview-image {
        max-width: 90%;
        max-height: 70%;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      }

      .preview-actions {
        display: flex;
        gap: 12px;
        margin-top: 20px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .preview-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        padding: 12px 20px;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        font-size: 12px;
        backdrop-filter: blur(10px);
        white-space: nowrap;
      }

      .preview-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-2px);
      }

      .preview-btn.primary {
        background: rgba(0, 123, 255, 0.8);
        border-color: rgba(0, 123, 255, 1);
      }

      .preview-btn.primary:hover {
        background: rgba(0, 123, 255, 1);
      }

      .preview-btn.success {
        background: rgba(40, 167, 69, 0.8);
        border-color: rgba(40, 167, 69, 1);
      }

      .preview-btn.success:hover {
        background: rgba(40, 167, 69, 1);
      }

      .preview-btn.secondary {
        background: rgba(108, 117, 125, 0.8);
        border-color: rgba(108, 117, 125, 1);
      }

      .preview-btn.secondary:hover {
        background: rgba(108, 117, 125, 1);
      }

      .preview-btn.disabled {
        background: rgba(108, 117, 125, 0.4);
        border-color: rgba(108, 117, 125, 0.6);
        color: rgba(255, 255, 255, 0.5);
        cursor: not-allowed;
      }

      .preview-btn.disabled:hover {
        background: rgba(108, 117, 125, 0.4);
        border-color: rgba(108, 117, 125, 0.6);
        transform: none;
      }

      .camera-error {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: #fff;
        background: rgba(0, 0, 0, 0.8);
        padding: 20px;
        border-radius: 10px;
        backdrop-filter: blur(10px);
      }

      /* Responsive */
      @media (max-width: 480px) {
        .content {
          padding: 12px;
        }

        .app-title {
          font-size: 16px;
        }

        .nav-button {
          font-size: 8px;
          padding: 8px 6px;
        }

        .capture-button {
          width: 60px;
          height: 60px;
        }

        .capture-button::after {
          width: 40px;
          height: 40px;
        }

        .preview-actions {
          gap: 8px;
        }

        .preview-btn {
          padding: 10px 16px;
          font-size: 11px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Animated Background -->
      <div class="bg-animation">
        <div class="lens-flare"></div>
        <div class="lens-flare"></div>
        <div class="lens-flare"></div>
      </div>

      <!-- Main Home Page -->
      <div class="content" id="homePage">
        <!-- Header -->
        <div class="header">
          <div class="logo-section">
            <div class="lens-logo"></div>
            <h1 class="app-title">LENS APP</h1>
          </div>
          <div class="header-controls">
            <button class="theme-toggle" onclick="toggleTheme(this)">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="5" />
                <path
                  d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
                />
              </svg>
            </button>
            <button class="connect-wallet" onclick="openPage('wallet')">
              Connect Wallet
            </button>
          </div>
        </div>

        <!-- Daily Slogan -->
        <div class="daily-slogan">
          <div class="slogan-text" id="dynamicSlogan">
            Capture the moment with $LENS
          </div>
        </div>

        <!-- Tabs -->
        <div class="tabs-container">
          <div class="tab-buttons">
            <button class="tab-button" onclick="switchTab('leaderboard')">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="13" width="4" height="8" rx="1" />
                <rect x="10" y="9" width="4" height="12" rx="1" />
                <rect x="17" y="5" width="4" height="16" rx="1" />
                <line x1="1" y1="22" x2="23" y2="22" />
              </svg>
            </button>
            <button class="tab-button active" onclick="switchTab('pod')">
              P &nbsp; O &nbsp; D
            </button>
            <button class="tab-button" onclick="switchTab('learning')">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M12 2L2 7l10 5 10-5-10-5z" />
                <path d="M2 17l10 5 10-5" />
                <path d="M6 9.5v6.5l6 3 6-3v-6.5" />
                <circle cx="12" cy="12" r="1" fill="currentColor" />
              </svg>
            </button>
          </div>

          <div class="tab-content">
            <!-- Leaderboard Tab -->
            <div class="tab-panel" id="leaderboard">
              <div class="leaderboard-container">
                <div class="leaderboard-scroll" id="leaderboardList">
                  <!-- Top 100 users will be populated by JavaScript -->
                </div>

                <!-- Current User Rank (always shown) -->
                <div class="rank-separator">
                  <span>Your Rank</span>
                </div>
                <div class="leaderboard-item current-user-rank">
                  <div class="rank-sticker">
                    <span>247</span>
                  </div>
                  <div class="user-info">
                    <div class="username">photographer.eth</div>
                    <div class="points">8,420 points</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- POD Tab -->
            <div class="tab-panel active" id="pod">
              <div
                class="pod-image"
                onclick="window.open('https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3', '_blank')"
                style="cursor: pointer"
              >
                <img
                  src="https://wrpcd.net/cdn-cgi/imagedelivery/BXluQx4ige9GuW0Ia56BHw/2a24661e-4c3b-410d-2ae1-e64580a0e900/rectcontain3"
                  alt="Featured photography by Nima Leo"
                  style="
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 8px;
                  "
                  onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                />
                <div
                  style="
                    width: 100%;
                    height: 100%;
                    display: none;
                    align-items: center;
                    justify-content: center;
                    flex-direction: column;
                    color: #888;
                  "
                >
                  <svg
                    width="60"
                    height="60"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1"
                  >
                    <path
                      d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"
                    />
                    <circle cx="12" cy="13" r="3" />
                  </svg>
                  <p style="margin-top: 8px; font-size: 10px">
                    Image loading...
                  </p>
                </div>
              </div>
              <div class="pod-description">
                <strong>Today's Featured Photo (Picture of The Day):</strong
                ><br />
                Latest cast by
                <strong>Nima Leo</strong> (@nimaleophotos.eth)<br /><br />
                A stunning capture showcasing exceptional composition and
                artistic vision. Nima Leo continues to push the boundaries of
                contemporary photography with this compelling visual narrative.
              </div>
            </div>

            <!-- Learning Tab -->
            <div class="tab-panel" id="learning">
              <h2
                style="
                  font-size: 16px;
                  font-weight: 700;
                  margin-bottom: 15px;
                  text-align: center;
                  color: #fff;
                  transition: all 0.3s ease;
                "
                class="tutorial-title"
              >
                Photography Tutorials
              </h2>
              <div class="tip-card" onclick="openTutorial()">
                <div class="tip-title">Mobile Photography</div>
                <div class="tip-content">
                  Master the art of photography using your smartphone. Learn
                  composition, lighting, and editing techniques specifically for
                  mobile devices.
                </div>
              </div>
              <div class="tip-card" onclick="openTutorial()">
                <div class="tip-title">Basic Photography</div>
                <div class="tip-content">
                  Foundation skills every photographer needs. Understand
                  exposure, aperture, shutter speed, and ISO to take control of
                  your camera.
                </div>
              </div>
              <div class="tip-card" onclick="openTutorial()">
                <div class="tip-title">Intermediate Photography</div>
                <div class="tip-content">
                  Advanced composition techniques, creative lighting setups, and
                  post-processing workflows to elevate your photography skills.
                </div>
              </div>
              <div class="tip-card" onclick="openTutorial()">
                <div class="tip-title">Pro Photography</div>
                <div class="tip-content">
                  Professional techniques, business skills, client management,
                  and advanced equipment usage for commercial photography
                  success.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
          <button class="nav-button" onclick="openPage('info')">
            <svg
              class="nav-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <circle cx="12" cy="12" r="10" />
              <text
                x="12"
                y="16"
                text-anchor="middle"
                font-size="12"
                font-weight="bold"
                fill="currentColor"
              >
                ?
              </text>
            </svg>
            Info
          </button>
          <button class="nav-button" onclick="openPage('competition')">
            <svg
              class="nav-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" />
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18" />
              <path d="M4 22h16" />
              <path
                d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"
              />
              <path
                d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"
              />
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z" />
              <circle cx="12" cy="6" r="1.5" fill="currentColor" />
            </svg>
            Competition
          </button>
          <button class="nav-button camera-button" onclick="openCamera()">
            <svg
              class="nav-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2.5"
            >
              <path
                d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"
              />
              <circle cx="12" cy="13" r="3" />
            </svg>
            Camera
          </button>
          <button class="nav-button" onclick="openPage('rewards')">
            <svg
              class="nav-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              />
              <circle cx="12" cy="12" r="3" fill="currentColor" opacity="0.3" />
            </svg>
            Rewards
          </button>
          <button class="nav-button" onclick="openPage('gallery')">
            <svg
              class="nav-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
              <circle cx="8.5" cy="8.5" r="1.5" />
              <polyline points="21,15 16,10 5,21" />
              <text
                x="12"
                y="20"
                text-anchor="middle"
                font-size="6"
                font-weight="bold"
                fill="currentColor"
              >
                LENS
              </text>
            </svg>
            LENS&nbsp;Gallery
          </button>
        </div>
      </div>

      <!-- Full Page Screens -->
      <!-- Info Page -->
      <div class="page-screen" id="infoPage">
        <div class="page-header">
          <button class="back-button" onclick="closePage()">
            <svg
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5" />
              <path d="M12 19l-7-7 7-7" />
            </svg>
            Back
          </button>
          <div class="page-title">App Information</div>
          <div style="width: 50px"></div>
        </div>
        <div class="page-content">
          <div class="info-section">
            <h3>Welcome to LENS APP</h3>
            <p>
              LENS APP is the premier photography community on Farcaster,
              connecting photographers worldwide through the power of blockchain
              technology and social interaction.
            </p>
            <p>
              Share your work, compete in daily challenges, and discover amazing
              photography from creators around the globe.
            </p>
          </div>

          <div class="feature-grid">
            <div class="feature-card">
              <h4>ðŸ“¸ Photo Sharing</h4>
              <p>
                Upload and share your best photography with the community. Get
                feedback and recognition for your creative work.
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸ† Competitions</h4>
              <p>
                Participate in daily, weekly, and monthly photography
                competitions with exciting prizes and recognition.
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸ“Š Leaderboards</h4>
              <p>
                Track your progress and see how you rank against other
                photographers in the community.
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸŽ“ Learning</h4>
              <p>
                Access tutorials and tips from professional photographers to
                improve your skills.
              </p>
            </div>
          </div>

          <div class="info-section">
            <h3>About $LENS Token</h3>
            <p>
              Earn $LENS tokens by participating in the community, winning
              competitions, and sharing quality content. Use your tokens to
              unlock premium features and exclusive content.
            </p>
          </div>
        </div>
      </div>

      <!-- Competition Page -->
      <div class="page-screen" id="competitionPage">
        <div class="page-header">
          <button class="back-button" onclick="closePage()">
            <svg
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5" />
              <path d="M12 19l-7-7 7-7" />
            </svg>
            Back
          </button>
          <div class="page-title">Photography Competitions</div>
          <div style="width: 50px"></div>
        </div>
        <div class="page-content">
          <div class="competition-item">
            <div class="competition-title">ðŸ† Daily Photo Challenge</div>
            <div class="competition-description">
              Submit your best photo of the day based on our daily theme.
              Winners are selected every 24 hours and featured on the main page.
            </div>
            <div class="competition-prize">
              Prize: 100 $LENS + Featured Spot
            </div>
          </div>

          <div class="competition-item">
            <div class="competition-title">ðŸŽ¯ Weekly Theme Contest</div>
            <div class="competition-description">
              Each week features a specific photography theme. Create and submit
              photos that best represent the weekly challenge.
            </div>
            <div class="competition-prize">
              Prize: 500 $LENS + Gallery Feature
            </div>
          </div>

          <div class="competition-item">
            <div class="competition-title">ðŸ“± Mobile Photography Masters</div>
            <div class="competition-description">
              Showcase the power of mobile photography. Only photos taken with
              smartphones are eligible for this monthly competition.
            </div>
            <div class="competition-prize">Prize: 1000 $LENS + Pro Badge</div>
          </div>

          <div class="competition-item">
            <div class="competition-title">ðŸŒŸ Monthly Portfolio Review</div>
            <div class="competition-description">
              Submit your best 5 photos for professional review and feedback
              from industry experts.
            </div>
            <div class="competition-prize">
              Prize: Professional Feedback + Mentorship
            </div>
          </div>

          <div class="competition-item">
            <div class="competition-title">ðŸ… Annual Photography Awards</div>
            <div class="competition-description">
              The biggest competition of the year! Multiple categories including
              Portrait, Landscape, Street, and Abstract photography.
            </div>
            <div class="competition-prize">
              Prize: 10,000 $LENS + NFT Collection
            </div>
          </div>
        </div>
      </div>

      <!-- Gallery Page -->
      <div class="page-screen" id="galleryPage">
        <div class="page-header">
          <button class="back-button" onclick="closePage()">
            <svg
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5" />
              <path d="M12 19l-7-7 7-7" />
            </svg>
            Back
          </button>
          <div class="page-title">LENS Gallery</div>
          <div style="width: 50px"></div>
        </div>
        <div class="page-content">
          <div class="info-section">
            <h3>Featured Collections</h3>
            <p>
              Discover the best photography from our community, curated by
              experts and voted by users.
            </p>
          </div>

          <div class="gallery-grid">
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #1</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #2</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #3</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #4</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #5</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #6</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #7</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #8</div>
            </div>
            <div class="gallery-item">
              <div class="gallery-placeholder">Featured<br />Photo #9</div>
            </div>
          </div>

          <div class="info-section">
            <h3>Community Showcase</h3>
            <p>
              Recent uploads from photographers in our community. Vote for your
              favorites to help them climb the leaderboard!
            </p>
          </div>

          <div class="feature-grid">
            <div class="feature-card">
              <h4>ðŸ”¥ Trending Now</h4>
              <p>
                The most popular photos this week, based on community votes and
                engagement.
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸ“± My Portfolio</h4>
              <p>
                View and manage your uploaded photos, track their performance,
                and see engagement stats.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Wallet Profile Page -->
      <div class="page-screen" id="walletPage">
        <div class="page-header">
          <button class="back-button" onclick="closePage()">
            <svg
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5" />
              <path d="M12 19l-7-7 7-7" />
            </svg>
            Back
          </button>
          <div class="page-title">Wallet Profile</div>
          <div style="width: 50px"></div>
        </div>
        <div class="page-content">
          <div
            class="info-section"
            style="
              text-align: center;
              background: rgba(0, 123, 255, 0.1);
              border-color: rgba(0, 123, 255, 0.3);
            "
          >
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 12px;
                margin-bottom: 15px;
              "
            >
              <div
                style="
                  width: 60px;
                  height: 60px;
                  border-radius: 50%;
                  background: linear-gradient(135deg, #007bff, #0056b3);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  font-size: 24px;
                  font-weight: 800;
                  color: white;
                "
              >
                P
              </div>
              <div style="text-align: left">
                <h3 style="margin: 0; font-size: 20px; color: #007bff">
                  photographer.eth
                </h3>
                <p style="margin: 2px 0 0 0; font-size: 12px; color: #888">
                  Connected Wallet
                </p>
              </div>
            </div>
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-top: 20px;
              "
            >
              <div style="text-align: center">
                <div style="font-size: 24px; font-weight: 700; color: #ffd700">
                  8,420
                </div>
                <div style="font-size: 11px; color: #ccc">$LENS Balance</div>
              </div>
              <div style="text-align: center">
                <div style="font-size: 24px; font-weight: 700; color: #007bff">
                  247
                </div>
                <div style="font-size: 11px; color: #ccc">Global Rank</div>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸ“Š Account Statistics</h3>
            <div class="feature-grid">
              <div class="feature-card">
                <h4>ðŸ“¸ Photos Uploaded</h4>
                <p
                  style="
                    font-size: 18px;
                    font-weight: 700;
                    color: #fff;
                    margin: 8px 0;
                    transition: all 0.3s ease;
                  "
                  class="profile-stat"
                >
                  127
                </p>
              </div>
              <div class="feature-card">
                <h4>ðŸ† Competitions Won</h4>
                <p
                  style="
                    font-size: 18px;
                    font-weight: 700;
                    color: #ffd700;
                    margin: 8px 0;
                  "
                >
                  3
                </p>
              </div>
              <div class="feature-card">
                <h4>ðŸ‘¥ Followers</h4>
                <p
                  style="
                    font-size: 18px;
                    font-weight: 700;
                    color: #007bff;
                    margin: 8px 0;
                  "
                >
                  1,284
                </p>
              </div>
              <div class="feature-card">
                <h4>â¤ï¸ Total Likes</h4>
                <p
                  style="
                    font-size: 18px;
                    font-weight: 700;
                    color: #ff6b6b;
                    margin: 8px 0;
                  "
                >
                  5,672
                </p>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸŽ–ï¸ Achievements Unlocked</h3>
            <div class="feature-grid">
              <div
                class="feature-card"
                style="
                  background: rgba(255, 215, 0, 0.1);
                  border-color: rgba(255, 215, 0, 0.3);
                "
              >
                <h4>ðŸ¥‡ First Place Winner</h4>
                <p>Won daily competition on March 15th</p>
              </div>
              <div
                class="feature-card"
                style="
                  background: rgba(0, 123, 255, 0.1);
                  border-color: rgba(0, 123, 255, 0.3);
                "
              >
                <h4>ðŸ“± Mobile Master</h4>
                <p>Uploaded 100+ mobile photos</p>
              </div>
              <div
                class="feature-card"
                style="
                  background: rgba(40, 167, 69, 0.1);
                  border-color: rgba(40, 167, 69, 0.3);
                "
              >
                <h4>ðŸ”¥ Week Streak</h4>
                <p>7-day consecutive login streak</p>
              </div>
              <div
                class="feature-card"
                style="
                  background: rgba(220, 53, 69, 0.1);
                  border-color: rgba(220, 53, 69, 0.3);
                "
              >
                <h4>â¤ï¸ Community Favorite</h4>
                <p>Photo received 500+ likes</p>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸ’° Wallet Details</h3>
            <div style="display: flex; flex-direction: column; gap: 12px">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 0;
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                "
              >
                <span style="font-size: 12px; color: #ccc">ENS Domain</span>
                <span style="font-size: 12px; font-weight: 600; color: #007bff"
                  >photographer.eth</span
                >
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 0;
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                "
              >
                <span style="font-size: 12px; color: #ccc">Wallet Address</span>
                <span
                  style="
                    font-size: 10px;
                    font-weight: 600;
                    color: #fff;
                    transition: all 0.3s ease;
                  "
                  class="profile-text"
                  >0x742d...A8C3</span
                >
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 0;
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                "
              >
                <span style="font-size: 12px; color: #ccc">Member Since</span>
                <span
                  style="
                    font-size: 12px;
                    font-weight: 600;
                    color: #fff;
                    transition: all 0.3s ease;
                  "
                  class="profile-text"
                  >February 2024</span
                >
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 0;
                  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                "
              >
                <span style="font-size: 12px; color: #ccc">Network</span>
                <span style="font-size: 12px; font-weight: 600; color: #8b5cf6"
                  >Base</span
                >
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 0;
                "
              >
                <span style="font-size: 12px; color: #ccc">Status</span>
                <span style="font-size: 12px; font-weight: 600; color: #10b981"
                  >âœ“ Verified</span
                >
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸŽ¯ Recent Activity</h3>
            <div style="display: flex; flex-direction: column; gap: 8px">
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  padding: 8px;
                  background: rgba(255, 255, 255, 0.05);
                  border-radius: 6px;
                "
              >
                <div
                  style="
                    width: 6px;
                    height: 6px;
                    background: #10b981;
                    border-radius: 50%;
                  "
                ></div>
                <div style="flex: 1">
                  <div
                    style="
                      font-size: 11px;
                      color: #fff;
                      transition: all 0.3s ease;
                    "
                    class="activity-title"
                  >
                    Uploaded new photo
                  </div>
                  <div style="font-size: 9px; color: #888">2 hours ago</div>
                </div>
                <div style="font-size: 10px; color: #10b981">+25 $LENS</div>
              </div>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  padding: 8px;
                  background: rgba(255, 255, 255, 0.05);
                  border-radius: 6px;
                "
              >
                <div
                  style="
                    width: 6px;
                    height: 6px;
                    background: #ffd700;
                    border-radius: 50%;
                  "
                ></div>
                <div style="flex: 1">
                  <div
                    style="
                      font-size: 11px;
                      color: #fff;
                      transition: all 0.3s ease;
                    "
                    class="activity-title"
                  >
                    Won daily competition
                  </div>
                  <div style="font-size: 9px; color: #888">1 day ago</div>
                </div>
                <div style="font-size: 10px; color: #ffd700">+100 $LENS</div>
              </div>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  padding: 8px;
                  background: rgba(255, 255, 255, 0.05);
                  border-radius: 6px;
                "
              >
                <div
                  style="
                    width: 6px;
                    height: 6px;
                    background: #007bff;
                    border-radius: 50%;
                  "
                ></div>
                <div style="flex: 1">
                  <div
                    style="
                      font-size: 11px;
                      color: #fff;
                      transition: all 0.3s ease;
                    "
                    class="activity-title"
                  >
                    Daily login bonus
                  </div>
                  <div style="font-size: 9px; color: #888">1 day ago</div>
                </div>
                <div style="font-size: 10px; color: #007bff">+10 $LENS</div>
              </div>
            </div>
          </div>

          <div style="display: flex; gap: 8px; margin-top: 15px">
            <button
              style="
                flex: 1;
                background: rgba(220, 53, 69, 0.2);
                border: 1px solid rgba(220, 53, 69, 0.4);
                color: #dc3545;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 600;
                font-size: 12px;
              "
              onclick="disconnectWallet()"
            >
              Disconnect Wallet
            </button>
            <button
              style="
                flex: 1;
                background: rgba(0, 123, 255, 0.2);
                border: 1px solid rgba(0, 123, 255, 0.4);
                color: #007bff;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 600;
                font-size: 12px;
              "
              onclick="copyAddress()"
            >
              Copy Address
            </button>
          </div>
        </div>
      </div>

      <!-- Rewards Page -->
      <div class="page-screen" id="rewardsPage">
        <div class="page-header">
          <button class="back-button" onclick="closePage()">
            <svg
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5" />
              <path d="M12 19l-7-7 7-7" />
            </svg>
            Back
          </button>
          <div class="page-title">Rewards & Achievements</div>
          <div style="width: 50px"></div>
        </div>
        <div class="page-content">
          <div class="info-section">
            <h3>ðŸ† Your $LENS Balance</h3>
            <p
              style="
                font-size: 24px;
                font-weight: 700;
                color: #ffd700;
                margin: 10px 0;
              "
            >
              8,420 $LENS
            </p>
            <p>
              Earn more $LENS by participating in competitions, sharing quality
              photos, and engaging with the community!
            </p>
          </div>

          <div class="feature-grid">
            <div class="feature-card">
              <h4>â­ Daily Login Bonus</h4>
              <p>
                Get 10 $LENS tokens every day you open the app. Streak bonus: +5
                $LENS for 7+ days!
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸ“¸ Photo Upload Reward</h4>
              <p>
                Earn 25 $LENS for each photo you upload. Quality photos get
                bonus rewards from community votes.
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸŽ¯ Competition Prizes</h4>
              <p>
                Win big in daily, weekly, and monthly competitions. Top prizes
                range from 100 to 10,000 $LENS!
              </p>
            </div>
            <div class="feature-card">
              <h4>ðŸ‘¥ Referral Rewards</h4>
              <p>
                Invite friends and earn 100 $LENS for each new photographer who
                joins through your link.
              </p>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸŽ–ï¸ Achievement Badges</h3>
            <div class="feature-grid">
              <div
                class="feature-card"
                style="
                  background: rgba(255, 215, 0, 0.1);
                  border-color: rgba(255, 215, 0, 0.3);
                "
              >
                <h4>ðŸ¥‡ First Place Winner</h4>
                <p>Won a daily competition</p>
              </div>
              <div
                class="feature-card"
                style="
                  background: rgba(0, 123, 255, 0.1);
                  border-color: rgba(0, 123, 255, 0.3);
                "
              >
                <h4>ðŸ“± Mobile Master</h4>
                <p>100+ mobile photos uploaded</p>
              </div>
              <div class="feature-card" style="opacity: 0.5">
                <h4>ðŸ”¥ Streak Legend</h4>
                <p>30-day login streak (Locked)</p>
              </div>
              <div class="feature-card" style="opacity: 0.5">
                <h4>ðŸ‘‘ Community Leader</h4>
                <p>Top 10 leaderboard (Locked)</p>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>ðŸ’Ž Spend Your $LENS</h3>
            <div class="feature-grid">
              <div class="feature-card">
                <h4>ðŸŽ¨ Premium Filters</h4>
                <p>
                  Unlock exclusive photo filters and editing tools. Cost: 500
                  $LENS
                </p>
              </div>
              <div class="feature-card">
                <h4>â­ Profile Boost</h4>
                <p>
                  Feature your profile for 24 hours to gain more followers.
                  Cost: 200 $LENS
                </p>
              </div>
              <div class="feature-card">
                <h4>ðŸ·ï¸ Custom Badge</h4>
                <p>
                  Create and display a personalized achievement badge. Cost:
                  1,000 $LENS
                </p>
              </div>
              <div class="feature-card">
                <h4>ðŸŽ NFT Minting</h4>
                <p>
                  Mint your best photos as NFTs directly from the app. Cost: 300
                  $LENS
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Camera Screen -->
      <div class="camera-screen" id="cameraScreen">
        <div class="camera-viewport">
          <video
            class="camera-video"
            id="cameraVideo"
            autoplay
            playsinline
          ></video>

          <!-- Camera Overlay -->
          <div class="camera-overlay">
            <div class="grid-overlay" id="gridOverlay"></div>
            <div class="aspect-ratio-overlay" id="aspectOverlay"></div>
          </div>

          <!-- Top Controls -->
          <div class="camera-controls-top">
            <div class="camera-controls-left">
              <button class="camera-btn" onclick="closeCamera()">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M18 6L6 18M6 6l12 12" />
                </svg>
              </button>
            </div>

            <div class="camera-controls-right">
              <button class="camera-btn" id="flashBtn" onclick="toggleFlash()">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  id="flashIcon"
                >
                  <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                </svg>
              </button>

              <button class="camera-btn" id="gridBtn" onclick="toggleGrid()">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="3" width="6" height="6" />
                  <rect x="15" y="3" width="6" height="6" />
                  <rect x="3" y="15" width="6" height="6" />
                  <rect x="15" y="15" width="6" height="6" />
                </svg>
              </button>

              <button class="camera-btn" onclick="switchCamera()">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M1 4v6h6" />
                  <path d="M23 20v-6h-6" />
                  <path
                    d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"
                  />
                </svg>
              </button>

              <button class="camera-btn" id="timerBtn" onclick="toggleTimer()">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10" />
                  <polyline points="12,6 12,12 16,14" />
                </svg>
              </button>

              <button
                class="camera-btn"
                id="aspectBtn"
                onclick="toggleAspectRatio()"
              >
                <span style="font-size: 9px; font-weight: 700">Full</span>
              </button>
            </div>
          </div>

          <!-- Bottom Controls -->
          <div class="camera-controls-bottom">
            <!-- Zoom Controls -->
            <div class="zoom-controls">
              <button class="zoom-btn" onclick="setZoom('wide', event)">
                0.5x
              </button>
              <button
                class="zoom-btn active"
                onclick="setZoom('normal', event)"
              >
                1x
              </button>
              <button class="zoom-btn" onclick="setZoom('zoom', event)">
                2x
              </button>
            </div>

            <!-- Capture Button -->
            <button class="capture-button" onclick="capturePhoto()"></button>
          </div>

          <!-- Timer Display -->
          <div class="timer-display" id="timerDisplay">3</div>

          <!-- Error Message -->
          <div class="camera-error" id="cameraError" style="display: none">
            <h3>Camera Access Required</h3>
            <p>Please allow camera access to use this feature.</p>
            <button
              class="camera-btn"
              onclick="requestCameraPermission()"
              style="margin-top: 10px"
            >
              Try Again
            </button>
          </div>
        </div>

        <!-- Photo Preview -->
        <div class="photo-preview" id="photoPreview">
          <img class="preview-image" id="previewImage" alt="Captured photo" />
          <div class="preview-actions">
            <button class="preview-btn secondary" onclick="retakePhoto()">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M1 4v6h6" />
                <path d="M23 20v-6h-6" />
                <path
                  d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"
                />
              </svg>
            </button>
            <button class="preview-btn primary" onclick="shareOnFarcaster()">
              <img
                src="https://github.com/vrypan/farcaster-brand/raw/main/icons/icon-rounded/purple-white.png"
                alt="Farcaster"
                width="20"
                height="20"
                style="border-radius: 4px"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';"
              />
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="currentColor"
                style="display: none"
              >
                <path
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"
                />
              </svg>
            </button>
            <button class="preview-btn success" onclick="saveToGallery()">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                />
                <polyline points="17,21 17,13 7,13 7,21" />
                <polyline points="7,3 7,8 15,8" />
              </svg>
            </button>
            <button class="preview-btn disabled" onclick="mintToLens()">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <path d="M8 12l2 2 4-4" />
                <path d="M12 2v4" />
                <path d="M12 18v4" />
                <path d="M4.93 4.93l2.83 2.83" />
                <path d="M16.24 16.24l2.83 2.83" />
                <path d="M2 12h4" />
                <path d="M18 12h4" />
                <path d="M4.93 19.07l2.83-2.83" />
                <path d="M16.24 7.76l2.83-2.83" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
        function connectWallet() {
            const walletButton = document.querySelector('.connect-wallet');
            walletButton.textContent = 'photographer.eth';
        }
        
        function disconnectWallet() {
            const walletButton = document.querySelector('.connect-wallet');
            walletButton.textContent = 'Connect Wallet';
            walletButton.onclick = function() { openPage('wallet'); };
            closePage();
        }
        
        function copyAddress() {
            // Simulate copying address to clipboard
            const address = '0x742d35Cc6C4C0532C58d4698E5982A8C3';
            
            // Create temporary element to copy text
            const tempElement = document.createElement('textarea');
            tempElement.value = address;
            document.body.appendChild(tempElement);
            tempElement.select();
            document.execCommand('copy');
            document.body.removeChild(tempElement);
            
            // Show feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.style.background = 'rgba(40, 167, 69, 0.2)';
            button.style.borderColor = 'rgba(40, 167, 69, 0.4)';
            button.style.color = '#28A745';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = 'rgba(0, 123, 255, 0.2)';
                button.style.borderColor = 'rgba(0, 123, 255, 0.4)';
                button.style.color = '#007BFF';
            }, 2000);
        }
        
        function openTutorial() {
            window.open('https://farcaster.xyz/nimaleophotos.eth', '_blank');
        }
        
        function openPage(pageType) {
            // Hide all pages first
            document.querySelectorAll('.page-screen').forEach(page => {
                page.classList.remove('show');
            });
            
            // Show the selected page
            const page = document.getElementById(pageType + 'Page');
            if (page) {
                page.classList.add('show');
            }
        }
        
        function closePage() {
            // Hide all pages
            document.querySelectorAll('.page-screen').forEach(page => {
                page.classList.remove('show');
            });
        }
        
        function toggleSetting(toggle) {
            toggle.classList.toggle('active');
        }
        
        function toggleTheme(toggle) {
            document.body.classList.toggle('light-theme');
            
            // Update icon based on theme
            const isLight = document.body.classList.contains('light-theme');
            const svg = toggle.querySelector('svg');
            
            if (isLight) {
                // Moon icon for light theme
                svg.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
            } else {
                // Sun icon for dark theme
                svg.innerHTML = '<circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>';
            }
        }
        
        function switchTab(tabName) {
            // Remove active class from all tab buttons and panels
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            
            // Add active class to clicked button and corresponding panel
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        // Generate leaderboard data
        function generateLeaderboard() {
            const leaderboardList = document.getElementById('leaderboardList');
            const usernames = [
                'artlens.eth', 'streetphoto.eth', 'blackwhite.eth', 'urbanshot.eth', 'nightcrawler.eth',
                'goldenhour.eth', 'shadowplay.eth', 'minimalist.eth', 'bokehmaster.eth', 'frameseeker.eth',
                'lightchaser.eth', 'momentcapture.eth', 'visualpoet.eth', 'lenscrafted.eth', 'shutterfly.eth',
                'pixelperfect.eth', 'focuspoint.eth', 'aperturepro.eth', 'exposureking.eth', 'composure.eth',
                'darkroom.eth', 'filmgrain.eth', 'analogsoul.eth', 'digitalart.eth', 'photojournal.eth',
                'streetwise.eth', 'portraitpro.eth', 'landscaper.eth', 'macro.eth', 'wildlife.eth',
                'architecture.eth', 'fashion.eth', 'wedding.eth', 'documentary.eth', 'abstract.eth',
                'vintage.eth', 'modern.eth', 'classic.eth', 'creative.eth', 'artistic.eth',
                'professional.eth', 'amateur.eth', 'enthusiast.eth', 'hobbyist.eth', 'collector.eth',
                'curator.eth', 'critic.eth', 'teacher.eth', 'student.eth', 'mentor.eth',
                'snapshot.eth', 'capture.eth', 'shutter.eth', 'exposure.eth', 'focus.eth',
                'lens.eth', 'frame.eth', 'shot.eth', 'click.eth', 'zoom.eth',
                'flash.eth', 'iso.eth', 'aperture.eth', 'depth.eth', 'bokeh.eth',
                'contrast.eth', 'saturation.eth', 'brightness.eth', 'shadow.eth', 'highlight.eth',
                'grain.eth', 'noise.eth', 'sharp.eth', 'blur.eth', 'motion.eth',
                'still.eth', 'candid.eth', 'posed.eth', 'natural.eth', 'studio.eth',
                'outdoor.eth', 'indoor.eth', 'sunrise.eth', 'sunset.eth', 'noon.eth',
                'twilight.eth', 'dawn.eth', 'dusk.eth', 'midnight.eth', 'morning.eth',
                'evening.eth', 'night.eth', 'day.eth', 'light.eth', 'dark.eth',
                'bright.eth', 'dim.eth', 'soft.eth', 'hard.eth', 'warm.eth',
                'cool.eth', 'vivid.eth', 'muted.eth', 'rich.eth', 'pale.eth',
                'deep.eth', 'shallow.eth', 'wide.eth', 'narrow.eth', 'close.eth',
                'distant.eth', 'near.eth', 'far.eth', 'high.eth', 'low.eth',
                'angle.eth', 'perspective.eth', 'viewpoint.eth', 'composition.eth', 'balance.eth'
            ];
            
            let html = '';
            
            // Create exactly 100 users with proper scoring
            for (let i = 1; i <= 100; i++) {
                const username = usernames[i - 1] || `photographer${i}.eth`;
                const basePoints = 20000;
                const points = basePoints - (i * 150) + Math.floor(Math.random() * 100);
                
                let rankClass = 'regular';
                let itemClass = '';
                let usernameClass = '';
                
                if (i === 1) {
                    rankClass = 'first';
                    itemClass = 'first';
                    usernameClass = 'first';
                } else if (i === 2) {
                    rankClass = 'second';
                    itemClass = 'second';
                    usernameClass = 'second';
                } else if (i === 3) {
                    rankClass = 'third';
                    itemClass = 'third';
                    usernameClass = 'third';
                }
                
                html += `
                    <div class="leaderboard-item ${itemClass}">
                        <div class="rank-sticker ${rankClass}">
                            <span>${i}</span>
                        </div>
                        <div class="user-info">
                            <div class="username ${usernameClass}">${username}</div>
                            <div class="points">${points.toLocaleString()} points</div>
                        </div>
                    </div>
                `;
            }
            
            leaderboardList.innerHTML = html;
        }
        
        // Dynamic slogan rotation
        const slogans = [
            "Capture the moment with $LENS!",
            "Behind every $LENS lies a new perspective!",
            "Every $LENS has a story to tell!",
            "A $LENS turns moments into memories!",
            "See the unseen through your $LENS!",
            "Life is more vivid through a $LENS!",
            "A $LENS captures what words cannot!"
        ];
        
        let currentSloganIndex = 0;
        
        function updateSlogan() {
            const sloganElement = document.getElementById('dynamicSlogan');
            if (sloganElement) {
                // Clear current content
                sloganElement.innerHTML = '';
                
                // Get next slogan
                currentSloganIndex = (currentSloganIndex + 1) % slogans.length;
                const newSlogan = slogans[currentSloganIndex];
                
                // Split into words and animate each one
                const words = newSlogan.split(' ');
                words.forEach((word, index) => {
                    const wordSpan = document.createElement('span');
                    wordSpan.className = 'slogan-word';
                    wordSpan.textContent = word;
                    wordSpan.style.animationDelay = `${index * 0.1}s`;
                    sloganElement.appendChild(wordSpan);
                });
            }
        }
        
        // ===== Camera functionality =====
        let currentStream = null;
        let currentCamera = 'user'; // 'user' for front, 'environment' for back
        let currentZoom = 1;
        let flashEnabled = false;
        let gridType = 'none'; // 'none', '3x3', 'symmetrical'
        let aspectRatio = 'full'; // 'full', '1:1', '3:4', '9:16'
        let timerSeconds = 0; // 0 = off, 3, 5
        let capturedImageData = null;
        let isTimerActive = false;

        // New: cache for deviceIds by lens type (Android)
        let lensIds = { main: null, wide: null, tele: null };
        let currentDeviceId = null;

        function isAndroid() {
            const ua = navigator.userAgent || navigator.vendor || window.opera;
            return /android/i.test(ua);
        }
        function isiOS() {
            const ua = navigator.userAgent || navigator.vendor || window.opera;
            return /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
        }

        async function openCamera() {
            const cameraScreen = document.getElementById('cameraScreen');
            cameraScreen.classList.add('show');
            
            try {
                await startCamera();
            } catch (error) {
                showCameraError();
            }
        }
        
        function closeCamera() {
            const cameraScreen = document.getElementById('cameraScreen');
            cameraScreen.classList.remove('show');
            
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
                currentStream = null;
            }
            
            // Reset preview
            const photoPreview = document.getElementById('photoPreview');
            photoPreview.classList.remove('show');
            
            // Reset timer
            isTimerActive = false;
            const timerDisplay = document.getElementById('timerDisplay');
            timerDisplay.style.display = 'none';
        }

        // Helper: ensure labels visible (permission gate)
        async function ensurePermissionForLabels() {
            // If we already have a stream, labels are typically unlocked
            if (currentStream) return;
            try {
                const tmp = await navigator.mediaDevices.getUserMedia({ video: true });
                tmp.getTracks().forEach(t => t.stop());
            } catch (_) {
                // ignore
            }
        }
        
        async function startCamera(preferredDeviceId = null) {
            const video = document.getElementById('cameraVideo');
            const errorDiv = document.getElementById('cameraError');
            
            try {
                // Stop existing stream
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }

                await ensurePermissionForLabels();
                
                // Get available devices
                const devices = await navigator.mediaDevices.enumerateDevices();
                const videoDevices = devices.filter(device => device.kind === 'videoinput');

                // Try to map lenses (Android): fill lensIds by label
                if (isAndroid()) {
                    const backCams = videoDevices.filter(d =>
                        d.label.toLowerCase().includes('back') ||
                        d.label.toLowerCase().includes('rear') ||
                        d.label.toLowerCase().includes('environment') ||
                        // Some devices only show generic names like "camera 0"
                        (!d.label && d.deviceId)
                    );

                    // Heuristics by label
                    backCams.forEach(d => {
                        const label = d.label.toLowerCase();
                        if (!label) return;
                        if (label.includes('ultra') || label.includes('wide') || label.includes('0.5') || label.includes('0.6')) {
                            lensIds.wide = lensIds.wide || d.deviceId;
                        } else if (label.includes('tele') || label.includes('zoom') || label.includes('2x')) {
                            lensIds.tele = lensIds.tele || d.deviceId;
                        } else if (label.includes('back') || label.includes('rear') || label.includes('environment')) {
                            lensIds.main = lensIds.main || d.deviceId;
                        }
                    });

                    // If still not set, fallbacks by count/order
                    if (!lensIds.main && backCams[0]) lensIds.main = backCams[0].deviceId;
                    if (!lensIds.wide && backCams.length >= 2) {
                        // pick a back cam that's not main
                        const candidate = backCams.find(d => d.deviceId !== lensIds.main);
                        if (candidate) lensIds.wide = candidate.deviceId;
                    }
                    if (!lensIds.tele && backCams.length >= 3) {
                        const candidate = backCams.find(d => d.deviceId !== lensIds.main && d.deviceId !== lensIds.wide);
                        if (candidate) lensIds.tele = candidate.deviceId;
                    }
                }
                
                // Find the appropriate camera
                let deviceId = preferredDeviceId || null;

                if (!deviceId) {
                    if (currentCamera === 'environment') {
                        // Prefer known main back cam if we have it
                        if (isAndroid() && lensIds.main) {
                            deviceId = lensIds.main;
                        } else {
                            const backCamera = videoDevices.find(device => 
                                device.label.toLowerCase().includes('back') || 
                                device.label.toLowerCase().includes('rear') ||
                                device.label.toLowerCase().includes('environment')
                            );
                            deviceId = backCamera ? backCamera.deviceId : videoDevices[0]?.deviceId;
                        }
                    } else {
                        const frontCamera = videoDevices.find(device => 
                            device.label.toLowerCase().includes('front') || 
                            device.label.toLowerCase().includes('user')
                        );
                        deviceId = frontCamera ? frontCamera.deviceId : videoDevices[1]?.deviceId || videoDevices[0]?.deviceId;
                    }
                }
                
                const constraints = {
                    video: {
                        deviceId: deviceId ? { exact: deviceId } : undefined,
                        facingMode: deviceId ? undefined : currentCamera,
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    }
                };
                
                currentStream = await navigator.mediaDevices.getUserMedia(constraints);
                currentDeviceId = deviceId || null;

                video.srcObject = currentStream;
                
                // Update video class based on camera
                video.className = currentCamera === 'environment' ? 'camera-video back-camera' : 'camera-video';
                
                errorDiv.style.display = 'none';
                
                // Apply zoom if not default
                if (currentZoom !== 1) {
                    applyZoom(currentZoom);
                }
                
            } catch (error) {
                console.error('Camera access error:', error);
                showCameraError();
            }
        }
        
        function showCameraError() {
            const errorDiv = document.getElementById('cameraError');
            errorDiv.style.display = 'block';
        }
        
        async function requestCameraPermission() {
            try {
                await startCamera();
            } catch (error) {
                alert('Camera access is required to use this feature. Please check your browser settings and allow camera access.');
            }
        }
        
        async function switchCamera() {
            currentCamera = currentCamera === 'user' ? 'environment' : 'user';
            await startCamera();
        }
        
        function toggleFlash() {
            const flashBtn = document.getElementById('flashBtn');
            const flashIcon = document.getElementById('flashIcon');
            flashEnabled = !flashEnabled;
            
            if (flashEnabled) {
                flashBtn.classList.add('active');
                // Flash on icon
                flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>';
                
                // Apply flash effect to video if supported
                if (currentStream) {
                    const track = currentStream.getVideoTracks()[0];
                    const capabilities = track.getCapabilities();
                    if (capabilities.torch) {
                        track.applyConstraints({
                            advanced: [{ torch: true }]
                        }).catch(console.error);
                    }
                }
            } else {
                flashBtn.classList.remove('active');
                // Flash off icon (with diagonal line)
                flashIcon.innerHTML = '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/><line x1="2" y1="2" x2="22" y2="22" stroke="currentColor" stroke-width="2"/>';
                
                if (currentStream) {
                    const track = currentStream.getVideoTracks()[0];
                    const capabilities = track.getCapabilities();
                    if (capabilities.torch) {
                        track.applyConstraints({
                            advanced: [{ torch: false }]
                        }).catch(console.error);
                    }
                }
            }
        }
        
        function toggleGrid() {
            const gridBtn = document.getElementById('gridBtn');
            const gridOverlay = document.getElementById('gridOverlay');
            
            // Cycle through grid types: none -> 3x3 -> symmetrical -> none
            const gridTypes = ['none', '3x3', 'symmetrical'];
            const currentIndex = gridTypes.indexOf(gridType);
            const nextIndex = (currentIndex + 1) % gridTypes.length;
            gridType = gridTypes[nextIndex];
            
            // Remove all grid classes
            gridOverlay.className = 'grid-overlay';
            
            if (gridType !== 'none') {
                gridOverlay.classList.add('active');
                gridOverlay.classList.add(`grid-${gridType}`);
                gridBtn.classList.add('active');
            } else {
                gridOverlay.classList.remove('active');
                gridBtn.classList.remove('active');
            }
        }
        
        function toggleTimer() {
            const timerBtn = document.getElementById('timerBtn');
            
            // Cycle through timer options: 0 -> 3 -> 5 -> 0
            const timerOptions = [0, 3, 5];
            const currentIndex = timerOptions.indexOf(timerSeconds);
            const nextIndex = (currentIndex + 1) % timerOptions.length;
            timerSeconds = timerOptions[nextIndex];
            
            if (timerSeconds > 0) {
                timerBtn.classList.add('active');
                // Update button text to show timer value
                timerBtn.innerHTML = `<span style="font-size: 10px; font-weight: 700;">${timerSeconds}s</span>`;
            } else {
                timerBtn.classList.remove('active');
                // Reset to clock icon
                timerBtn.innerHTML = `
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                    </svg>
                `;
            }
        }

        // === NEW: platform-aware lens selection ===
        async function setZoom(input, evt) {
            // Accept both numeric (0.5/1/2) and string ('wide'/'normal'/'zoom')
            const mode = (typeof input === 'string') 
                ? input 
                : (input <= 0.6 ? 'wide' : (input >= 1.5 ? 'zoom' : 'normal'));

            const e = evt || window.event;
            document.querySelectorAll('.zoom-btn').forEach(btn => btn.classList.remove('active'));
            if (e && e.target) e.target.classList.add('active');

            // If user is on front camera and Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¯ ÙˆØ§ÛŒØ¯/ØªÙ„Ù‡ØŒ Ø¨Ø±ÛŒÙ… Ø±ÙˆÛŒ Ù¾Ø´Øª
            if (currentCamera === 'user' && (mode === 'wide' || mode === 'zoom')) {
                currentCamera = 'environment';
            }

            if (isiOS()) {
                if (mode === 'wide') currentZoom = 0.5;
                else if (mode === 'normal') currentZoom = 1.0;
                else if (mode === 'zoom') currentZoom = 2.0;
                applyZoom(currentZoom);
                return;
            }

            if (isAndroid()) {
                try {
                    await ensurePermissionForLabels();
                    const devices = await navigator.mediaDevices.enumerateDevices();
                    const videoDevices = devices.filter(d => d.kind === 'videoinput');

                    // Refresh our lensIds mapping from labels (best-effort)
                    const backCams = videoDevices.filter(d =>
                        d.label.toLowerCase().includes('back') ||
                        d.label.toLowerCase().includes('rear') ||
                        d.label.toLowerCase().includes('environment') ||
                        (!d.label && d.deviceId)
                    );

                    const byLabel = (needle) => backCams.find(d => d.label.toLowerCase().includes(needle));

                    // Update lensIds heuristically
                    if (!lensIds.wide) {
                        const w = byLabel('ultra') || byLabel('wide') || byLabel('0.5') || byLabel('0.6');
                        if (w) lensIds.wide = w.deviceId;
                    }
                    if (!lensIds.tele) {
                        const t = byLabel('tele') || byLabel('zoom') || byLabel('2x');
                        if (t) lensIds.tele = t.deviceId;
                    }
                    if (!lensIds.main && backCams[0]) lensIds.main = backCams[0].deviceId;

                    if (mode === 'wide') {
                        // Prefer true ultra-wide if we have it
                        if (lensIds.wide) {
                            currentZoom = 1.0; // no digital zoom on the wide lens
                            await startCamera(lensIds.wide);
                        } else {
                            // If only one back camera detected, try cycling through others by index (best-effort)
                            const alt = backCams.find(d => d.deviceId !== currentDeviceId) || backCams[1];
                            if (alt && alt.deviceId) {
                                currentZoom = 1.0;
                                await startCamera(alt.deviceId);
                            } else {
                                // Last resort: digital
                                currentZoom = 0.6;
                                applyZoom(currentZoom);
                                console.warn('Ultra-wide lens not found on Android; using digital 0.6x.');
                            }
                        }
                        return;
                    }

                    if (mode === 'normal') {
                        if (lensIds.main) {
                            currentZoom = 1.0;
                            await startCamera(lensIds.main);
                        } else {
                            currentZoom = 1.0;
                            applyZoom(currentZoom);
                        }
                        return;
                    }

                    if (mode === 'zoom') {
                        if (lensIds.tele) {
                            currentZoom = 1.0;
                            await startCamera(lensIds.tele);
                        } else {
                            currentZoom = 2.0;
                            applyZoom(currentZoom);
                        }
                        return;
                    }
                } catch (err) {
                    console.error('Android lens switch failed, falling back to digital zoom:', err);
                    // Fallback
                    if (mode === 'wide') currentZoom = 0.6;
                    else if (mode === 'normal') currentZoom = 1.0;
                    else currentZoom = 2.0;
                    applyZoom(currentZoom);
                    return;
                }
            }

            // Desktop or unknown platform
            if (mode === 'wide') currentZoom = 0.5;
            else if (mode === 'normal') currentZoom = 1.0;
            else if (mode === 'zoom') currentZoom = 2.0;
            applyZoom(currentZoom);
        }
        
        function toggleAspectRatio() {
            const aspectBtn = document.getElementById('aspectBtn');
            
            // Cycle through aspect ratios: full -> 1:1 -> 3:4 -> 9:16 -> full
            const aspectOptions = ['full', '1:1', '3:4', '9:16'];
            const currentIndex = aspectOptions.indexOf(aspectRatio);
            const nextIndex = (currentIndex + 1) % aspectOptions.length;
            aspectRatio = aspectOptions[nextIndex];
            
            // Update button text
            aspectBtn.innerHTML = `<span style="font-size: 9px; font-weight: 700;">${aspectRatio}</span>`;
            
            applyAspectRatio(aspectRatio);
        }
        
        function setAspectRatio(ratio) {
            aspectRatio = ratio;
            
            // Update active aspect button
            document.querySelectorAll('.aspect-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            applyAspectRatio(ratio);
        }
        
        function applyAspectRatio(ratio) {
            const aspectOverlay = document.getElementById('aspectOverlay');
            
            // Remove all aspect classes
            aspectOverlay.className = 'aspect-ratio-overlay';
            
            if (ratio !== 'full') {
                aspectOverlay.classList.add('active');
                
                if (ratio === '1:1') {
                    aspectOverlay.classList.add('square');
                } else if (ratio === '9:16') {
                    aspectOverlay.classList.add('portrait');
                } else if (ratio === '3:4') {
                    aspectOverlay.classList.add('active'); // Default active styling for 3:4
                }
            }
        }
        
        function applyZoom(zoom) {
            const video = document.getElementById('cameraVideo');
            if (currentStream) {
                const track = currentStream.getVideoTracks()[0];
                const capabilities = track.getCapabilities ? track.getCapabilities() : {};
                
                if (capabilities.zoom) {
                    const maxZoom = capabilities.zoom.max;
                    const minZoom = capabilities.zoom.min;
                    const targetZoom = Math.min(Math.max(zoom, minZoom), maxZoom);
                    
                    track.applyConstraints({
                        advanced: [{ zoom: targetZoom }]
                    }).catch(() => {
                        // Fallback to CSS transform if hardware zoom not supported
                        const baseTransform = currentCamera === 'environment' ? 'scaleX(1)' : 'scaleX(-1)';
                        video.style.transform = `${baseTransform} scale(${zoom})`;
                    });
                } else {
                    // Fallback to CSS transform
                    const baseTransform = currentCamera === 'environment' ? 'scaleX(1)' : 'scaleX(-1)';
                    video.style.transform = `${baseTransform} scale(${zoom})`;
                }
            }
        }
        
        function capturePhoto() {
            if (isTimerActive) return; // Prevent multiple captures during timer
            
            if (timerSeconds > 0) {
                startTimer();
            } else {
                takePhoto();
            }
        }
        
        function startTimer() {
            isTimerActive = true;
            const timerDisplay = document.getElementById('timerDisplay');
            let countdown = timerSeconds;
            
            timerDisplay.textContent = countdown;
            timerDisplay.style.display = 'block';
            
            const timerInterval = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    timerDisplay.textContent = countdown;
                } else {
                    clearInterval(timerInterval);
                    timerDisplay.style.display = 'none';
                    takePhoto();
                    isTimerActive = false;
                }
            }, 1000);
        }
        
        function takePhoto() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            
            // Set canvas dimensions
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Apply flash effect
            if (flashEnabled) {
                const flashOverlay = document.createElement('div');
                flashOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: white;
                    z-index: 9999;
                    pointer-events: none;
                `;
                document.body.appendChild(flashOverlay);
                
                setTimeout(() => {
                    document.body.removeChild(flashOverlay);
                }, 100);
            }
            
            // Draw video frame to canvas
            if (currentCamera === 'user') {
                // Flip front camera image
                context.scale(-1, 1);
                context.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
            } else {
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
            }
            
            // Convert to image data
            capturedImageData = canvas.toDataURL('image/jpeg', 0.9);
            
            // Show preview
            showPhotoPreview();
        }
        
        function showPhotoPreview() {
            const photoPreview = document.getElementById('photoPreview');
            const previewImage = document.getElementById('previewImage');
            
            previewImage.src = capturedImageData;
            photoPreview.classList.add('show');
        }
        
        function retakePhoto() {
            const photoPreview = document.getElementById('photoPreview');
            photoPreview.classList.remove('show');
            capturedImageData = null;
        }
        
        function saveToGallery() {
            if (!capturedImageData) return;
            
            // Create download link
            const link = document.createElement('a');
            link.download = `lens-photo-${Date.now()}.jpg`;
            link.href = capturedImageData;
            link.click();
            
            // Show success message
            alert('Photo saved to your device!');
        }
        
        async function shareOnFarcaster() {
            if (!capturedImageData) return;
            
            try {
                // Generate a random image title for the cast
                const imageTitles = [
                    'Street Photography', 'Golden Hour', 'Urban Life', 'Portrait Session', 
                    'Landscape View', 'Night Shot', 'Candid Moment', 'Architecture', 
                    'Nature Scene', 'City Lights', 'Sunset Capture', 'Morning Light'
                ];
                const randomTitle = imageTitles[Math.floor(Math.random() * imageTitles.length)];
                
                // Create the cast text with your exact format
                const castText = `I captured ${randomTitle} with @lensapp!\n\nShare yours! $LENS`;
                
                // Convert base64 to blob
                const response = await fetch(capturedImageData);
                const blob = await response.blob();
                
                // Create form data for the image upload
                const formData = new FormData();
                formData.append('file', blob, `lens-photo-${Date.now()}.jpg`);
                
                // Check if Web Share API is available and supports files
                if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([blob], 'photo.jpg', { type: 'image/jpeg' })] })) {
                    // Use Web Share API to share directly to Farcaster
                    const file = new File([blob], `lens-photo-${Date.now()}.jpg`, { type: 'image/jpeg' });
                    
                    await navigator.share({
                        title: 'LENS Photo',
                        text: castText,
                        files: [file]
                    });
                    
                    alert('Photo shared successfully!');
                } else {
                    // Fallback: Create a temporary download and open Farcaster
                    const link = document.createElement('a');
                    link.download = `lens-photo-${Date.now()}.jpg`;
                    link.href = capturedImageData;
                    link.click();
                    
                    // Open Farcaster compose with text
                    const farcasterUrl = `https://warpcast.com/~/compose?text=${encodeURIComponent(castText)}`;
                    window.open(farcasterUrl, '_blank');
                    
                    alert('Photo downloaded! Please upload it manually to your Farcaster cast that just opened.');
                }
                
            } catch (error) {
                console.error('Error sharing photo:', error);
                
                // Fallback method
                const imageTitles = [
                    'Street Photography', 'Golden Hour', 'Urban Life', 'Portrait Session', 
                    'Landscape View', 'Night Shot', 'Candid Moment', 'Architecture', 
                    'Nature Scene', 'City Lights', 'Sunset Capture', 'Morning Light'
                ];
                const randomTitle = imageTitles[Math.floor(Math.random() * imageTitles.length)];
                const castText = `I captured ${randomTitle} with @lensapp!\n\nShare yours! $LENS`;
                
                // Download the image
                const link = document.createElement('a');
                link.download = `lens-photo-${Date.now()}.jpg`;
                link.href = capturedImageData;
                link.click();
                
                // Copy text to clipboard
                try {
                    await navigator.clipboard.writeText(castText);
                    alert('Photo downloaded and caption copied to clipboard! Please paste it in your Farcaster cast.');
                } catch (clipboardError) {
                    // Open Farcaster with the text
                    const farcasterUrl = `https://warpcast.com/~/compose?text=${encodeURIComponent(castText)}`;
                    window.open(farcasterUrl, '_blank');
                    alert('Photo downloaded! Please upload it to your Farcaster cast that just opened.');
                }
            }
        }
        
        function mintToLens() {
            alert('NFT minting feature coming soon! Stay tuned for updates.');
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            generateLeaderboard();
            
            // Start slogan rotation
            setInterval(updateSlogan, 4000);
            
            // Auto-connect wallet simulation
            setTimeout(() => {
                connectWallet();
            }, 2000);
        });
</script>

  </body>
</html>
